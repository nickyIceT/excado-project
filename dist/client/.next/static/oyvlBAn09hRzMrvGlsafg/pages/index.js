(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{2062:function(e,t,a){__NEXT_REGISTER_PAGE("/",function(){return e.exports=a(2128),{page:e.exports.default}})},2128:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),r=a(0),s=a.n(r),i=(a(48),a(10)),c=a.n(i),l=(a(66),a(44)),u=a.n(l),p=(a(42),a(20)),d=a.n(p),h=(a(553),a(86)),f=a.n(h),m=(a(2063),a(50),a(16)),w=a.n(m),g=(a(2065),a(17)),b=Object(g.d)("common")(function(e){var t=e.t,a=e.provinces.map(function(a,n){return e.seeMoreClicked?r.createElement(w.a,{lg:6,md:8,sm:12,xs:12,key:n},r.createElement("a",{href:"/tim-kiem?location=".concat(a.slug),target:"_blank",title:a.name},r.createElement("span",{className:"city-item"},a.name," (",a.totalNews,")"))):n<15?r.createElement(w.a,{lg:6,md:8,sm:12,xs:12,key:n},r.createElement("a",{href:"/tim-kiem?location=".concat(a.slug),target:"_blank",title:a.name},r.createElement("span",{className:"city-item"},a.name," (",a.totalNews>9999?"9999+":a.totalNews,")"))):15===n?r.createElement(w.a,{lg:6,md:8,sm:12,xs:12,key:n},r.createElement("span",{className:"see-more-button",onClick:e.onSeeMoreButtonClick},t("common:showMore"))):null});return r.createElement("div",{className:"city-list"},r.createElement("h3",null,t("common:provinces")),r.createElement(d.a,null,a))}),S=(a(2067),a(65)),y=r.Fragment,v=Object(g.d)("common")(function(e){var t=e.categories.map(function(t,a){return e.seeMoreTotalMachineClicked?r.createElement(w.a,{lg:4,md:8,sm:8,xs:8,className:"machine-item",key:a,style:{textAlign:"center"}},r.createElement("a",{onClick:function(){window.location.href="/chung-loai-may/".concat(t.slug)},title:t.name},r.createElement("img",{src:t.imageUrl,width:"80%"}),r.createElement("br",null),r.createElement("span",{className:"name-machine"},t.name," (",t.totalNews,")"))):S.isMobile?a<6?r.createElement(w.a,{lg:4,md:8,sm:8,xs:8,className:"machine-item",key:a,style:{textAlign:"center"}},r.createElement("a",{onClick:function(){window.location.href="/chung-loai-may/".concat(t.slug)},title:t.name},r.createElement("img",{src:t.imageUrl,width:"80%"}),r.createElement("br",null),r.createElement("span",{className:"name-machine"},t.name," (",t.totalNews,")"))):null:a<12?r.createElement(w.a,{lg:4,md:8,sm:8,xs:8,className:"machine-item",key:a,style:{textAlign:"center"}},r.createElement("a",{onClick:function(){window.location.href="/chung-loai-may/".concat(t.slug)},title:t.name},r.createElement("img",{src:t.imageUrl,width:"80%"}),r.createElement("br",null),r.createElement("span",{className:"name-machine"},t.name," (",t.totalNews,")"))):null});return r.createElement(y,null,r.createElement(d.a,{className:"machine-list-title"},r.createElement("h3",null,e.t("common:list-of-total-machine")),r.createElement("a",{onClick:e.onSeeMoreTotalMachineClick},e.seeMoreTotalMachineClicked?e.t("common:showLess"):e.t("common:showMore"))),r.createElement(d.a,{gutter:12,type:"flex",className:"machine-list"},r.createElement(w.a,{className:"button-pagging",lg:1,md:1,sm:0,xs:0}),r.createElement(w.a,{lg:22,md:22,sm:24,xs:24},t),r.createElement(w.a,{className:"button-pagging-right",lg:1,md:1,sm:0,xs:0})))}),k=a(661),E=(a(2069),function(e){return s.a.createElement("div",{className:"common-keywords"},s.a.createElement("h3",null,e.t("common:common-keywords")),s.a.createElement(d.a,null,s.a.createElement("ul",null,e.commonKeywords.map(function(e,t){return s.a.createElement(w.a,{lg:6,md:8,sm:12,xs:12,key:t},s.a.createElement("li",null,s.a.createElement("a",{href:"/tim-kiem?keyword=".concat(e.keyword),target:"_blank",title:e.keyword},s.a.createElement("span",{className:"city-item"},e.keyword))))}))))});function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=f.a.TabPane,B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,R(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,s.a.Component),a=t,(n=[{key:"render",value:function(){var e=this,t=this.props.t;return s.a.createElement(d.a,{className:"details-home-page"},s.a.createElement(f.a,{defaultActiveKey:"1",onChange:function(t){return e.props.onChangeTabs(t)}},s.a.createElement(T,{tab:t("index:news-sell"),key:"1"},s.a.createElement(u.a,{spinning:this.props.searchState.isLoadingDataSell},s.a.createElement(d.a,{className:"machine-list"},0===this.props.searchState.dataTotal.dataSell.data.length?s.a.createElement("div",{className:"box-nodata"},t("index:no-data")):s.a.createElement(k.a,{title:t("index:news-sell"),data:this.props.searchState.dataTotal.dataSell.data,profileState:this.props.profileState,changeFollowStatus:this.props.changeFollowStatus,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,disabledButtonLeft:this.props.disabledButtonLeft,disabledButtonRight:this.props.disabledButtonRight,xs:12,sm:12,md:12,lg:6,hiddenButton:!1})))),s.a.createElement(T,{tab:t("index:news-buy-or-rent"),key:"2"},s.a.createElement(u.a,{spinning:this.props.searchState.isLoadingDataBuy},s.a.createElement(d.a,{className:"machine-list"},0===this.props.searchState.dataTotal.dataBuy.data.length?s.a.createElement("div",{className:"box-nodata"},t("index:no-data")):s.a.createElement(k.a,{title:t("index:news-buy-or-rent"),data:this.props.searchState.dataTotal.dataBuy.data,profileState:this.props.profileState,changeFollowStatus:this.props.changeFollowStatus,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,disabledButtonLeft:this.props.disabledButtonLeft,disabledButtonRight:this.props.disabledButtonRight,hiddenButton:!1,xs:12,sm:12,md:12,lg:6})))),s.a.createElement(T,{tab:t("index:machine-for-rent"),key:"3"},s.a.createElement(u.a,{spinning:this.props.searchState.isLoadingDataLease},s.a.createElement(d.a,{className:"machine-list"},0===this.props.searchState.dataTotal.dataLease.data.length?s.a.createElement("div",{className:"box-nodata"},t("index:no-data")):s.a.createElement(k.a,{title:t("index:machine-for-rent"),data:this.props.searchState.dataTotal.dataLease.data,profileState:this.props.profileState,changeFollowStatus:this.props.changeFollowStatus,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,disabledButtonLeft:this.props.disabledButtonLeft,disabledButtonRight:this.props.disabledButtonRight,hiddenButton:!1,xs:12,sm:12,md:12,lg:6})))),s.a.createElement(T,{tab:t("index:machine-nearest"),key:"4"},s.a.createElement(u.a,{spinning:this.props.isLoadingNearestMachine},s.a.createElement(d.a,{className:"machine-list"},this.props.profileData&&this.props.profileData.province?s.a.createElement(k.a,{profileState:this.props.profileState,title:t("index:machine-nearest"),data:this.props.newsDataNearestMachine.data,changeFollowStatus:this.props.changeMostFollowNewsFollowStatus,buttonLeft:this.props.buttonLeft,buttonRight:this.props.buttonRight,disabledButtonLeft:this.props.disabledButtonLeft,disabledButtonRight:this.props.disabledButtonRight,hiddenButton:!1,xs:12,sm:12,md:12,lg:6}):s.a.createElement("div",{className:"box-nodata"},this.props.profileState&&this.props.profileState.authUser&&this.props.profileState.authUser.id?s.a.createElement("a",{href:"/thong-tin-ca-nhan"},t("common:update-location-notify")):s.a.createElement("a",{onClick:function(){return e.props.profileReducers.openModal({modalName:"login"})}},t("common:login-update-location-notify"))))))),s.a.createElement(u.a,{spinning:this.props.searchState.isLoadingDataMostFollow},s.a.createElement(d.a,{className:"machine-list"},s.a.createElement(k.a,{profileState:this.props.profileState,title:t("index:most-follow-news"),data:this.props.searchState.dataTotal.dataMostFollow.data,changeFollowStatus:this.props.changeMostFollowNewsFollowStatus,buttonLeft:this.props.buttonLeftMostFollow,buttonRight:this.props.buttonRightMostFollow,disabledButtonLeft:this.props.disabledButtonLeftMostFollow,disabledButtonRight:this.props.disabledButtonRightMostFollow,hiddenButton:!1,isShowTotalFollowAndView:!1,xs:12,sm:12,md:12,lg:6}))),s.a.createElement(d.a,null,s.a.createElement(v,{categories:this.props.categories,seeMoreTotalMachineClicked:this.props.seeMoreTotalMachineClicked,onSeeMoreTotalMachineClick:this.props.onSeeMoreTotalMachineClick})),s.a.createElement(b,{provinces:this.props.provinces,seeMoreClicked:this.props.seeMoreClicked,onSeeMoreButtonClick:this.props.onSeeMoreCityListButtonClick}),this.props.recentViewedData.length>0&&s.a.createElement(u.a,{spinning:this.props.isLoadingRecentViewed},s.a.createElement(d.a,{className:"machine-list"},s.a.createElement(k.a,{title:t("index:recent-news"),data:this.props.recentViewedData.map(function(e){return e.news}),profileState:this.props.profileState,xs:12,sm:12,md:12,lg:6,buttonRight:this.props.getRecentViewedNextPage,buttonLeft:this.props.getRecentViewedPrevPage,disabledButtonRight:this.props.hasRecentViewedNextPage,disabledButtonLeft:this.props.hasRecentViewedPrevPage,changeFollowStatus:this.props.changeRecentViewedFollowStatus,hiddenButton:!1}))),s.a.createElement(d.a,{className:"machine-list"},s.a.createElement(k.a,{title:t("index:suggest-for-today"),data:this.props.resultSuggestForToday.data,profileState:this.props.profileState,hiddenButton:!0,disabledButtonLeft:!0,disabledButtonRight:!0,xs:12,sm:12,md:12,lg:6,changeFollowStatus:this.props.changeSuggestForTodayFollowStatus,buttonLeft:function(){},buttonRight:function(){}})),s.a.createElement(E,{commonKeywords:this.props.commonKeywords,t:this.props.t}))}}])&&M(a.prototype,n),o&&M(a,o),t}(),F=Object(g.d)("index")(B),C=a(22),D=[{id:"iVTOIQVYireM25PdQknwnt1o8n12",key:1,title:"Komatsu PC200-6",imageUrls:["/static/images/may-1.jpg"],status:"Đã sử dụng",ownerName:"Thinh Nguyen",location:"Hà Nội",price:45e6,followBy:["Uv438xXnmIbKKUdjQfTzG8QYot82"]},{id:"iVTOIQVYireM25PdQknwnt1o8n12",key:2,title:"Hitachi PC200-6",imageUrls:["/static/images/may-2.jpg"],status:"Đã sử dụng",ownerName:"Thinh Nguyen",location:"Nam Định",price:36e5,followBy:["Uv438xXnmIbKKUdjQfTzG8QYot82"]},{id:"iVTOIQVYireM25PdQknwnt1o8n12",key:3,title:"Komatsu PC200-6",imageUrls:["/static/images/may-3.jpg"],status:"Đã sử dụng",ownerName:"Thinh Nguyen",location:"Hà Nội",price:45e6,followBy:["Uv438xXnmIbKKUdjQfTzG8QYot82"]},{id:"iVTOIQVYireM25PdQknwnt1o8n12",key:4,title:"Hitachi PC200-6",imageUrls:["/static/images/may-4.jpg"],status:"Đã sử dụng",ownerName:"Thinh Nguyen",location:"Nam Định",price:36e5,followBy:["Uv438xXnmIbKKUdjQfTzG8QYot82"]}],O=a(749),V=a(13),P=a(67),j=(a(2071),a(803)),I=a(527),_=a.n(I),U=a(27);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){z(e,t,a[t])})}return e}function Q(e,t,a,n,o,r,s){try{var i=e[r](s),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function Y(e){return function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function s(e){Q(r,n,o,s,i,"next",e)}function i(e){Q(r,n,o,s,i,"throw",e)}s(void 0)})}}function H(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var J=function(e){function t(){var e,a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];return n=this,r=(e=G(t)).call.apply(e,[this].concat(i)),a=!r||"object"!==A(r)&&"function"!=typeof r?X(n):r,z(X(a),"state",{categories:[],provinces:[],commonKeywords:[],seeMoreTotalMachineClicked:!1,seeMoreClicked:!1,resultSearchNewestPost:a.props.resultSearchNewestPost,resultSuggestForToday:{data:[],before:"",after:""},newsDataNearestMachine:{data:[]},isLoadingNearestMachine:!1,recentViewed:{data:[],before:void 0,after:void 0,first:4,sortBy:"lastModifiedAt|desc"},isLoadingRecentViewed:!1}),z(X(a),"getCategories",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(V.a)(),e.next=4,t.findCategories();case 4:n=e.sent,a.setState({categories:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))),z(X(a),"getProvinces",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(V.a)(),e.next=4,t.findProvinces();case 4:n=e.sent,a.setState({provinces:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))),z(X(a),"getCommonKeywords",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(V.a)(),e.next=4,t.getCommonKeywords(20,"count|desc",void 0,void 0);case 4:n=e.sent,a.setState({commonKeywords:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}))),z(X(a),"getResultSuggestForToday",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,20,t=Object(V.a)(),e.next=5,t.searchElasticsearch(void 0,void 0,void 0,void 0,void 0,void 0,void 0,"SELL",void 0,void 0,void 0,void 0,void 0,void 0,void 0,20,"elasticsearchCreatedAt|desc",void 0,void 0);case 5:n=e.sent,a.setState({resultSuggestForToday:{data:n.data,before:n.before,after:n.after}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))),z(X(a),"getMostFollowNews",Y(o.a.mark(function e(){var t,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=S.isMobile?2:4,n=Object(V.a)(),e.next=5,n.searchNewsMostFollow(void 0,t,"counterFollow","_id",void 0,void 0);case 5:r=e.sent,a.props.searchReducers.getDataMostFollowSuccess(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))),z(X(a),"getRecentViewedData",Y(o.a.mark(function e(){var t,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.get("token"),n=Object(V.a)(t),e.next=4,n.getRecentViewed(a.state.recentViewed.first,a.state.recentViewed.sortBy,void 0,void 0);case 4:r=e.sent,a.setState({recentViewed:K({},a.state.recentViewed,{data:r.data,before:r.before,after:r.after})});case 6:case"end":return e.stop()}},e)}))),z(X(a),"getRecentViewedNextPage",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoadingRecentViewed:!0}),e.prev=1,t=Object(V.a)(),e.next=5,t.getRecentViewed(a.state.recentViewed.first,a.state.recentViewed.sortBy,void 0,a.state.recentViewed.after);case 5:n=e.sent,a.setState({recentViewed:K({},a.state.recentViewed,{data:n.data,before:n.before,after:n.after}),isLoadingRecentViewed:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c.a.error(e.t0.message||JSON.parse(e.t0.response).message);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))),z(X(a),"getRecentViewedPrevPage",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({isLoadingRecentViewed:!0}),e.prev=1,t=Object(V.a)(),e.next=5,t.getRecentViewed(a.state.recentViewed.first,a.state.recentViewed.sortBy,a.state.recentViewed.before,void 0);case 5:n=e.sent,a.setState({recentViewed:K({},a.state.recentViewed,{data:n.data,before:n.before,after:n.after}),isLoadingRecentViewed:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c.a.error(e.t0.message||JSON.parse(e.t0.response).message);case 12:case"end":return e.stop()}},e,null,[[1,9]])}))),z(X(a),"changeSuggestForTodayFollowStatus",function(){var e=Y(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.profileState||!a.props.profileState.authUser){e.next=12;break}if("filled"!==t){e.next=7;break}return e.next=4,a.props.followReducers.unfollowNews({userId:a.props.profileState.authUser.id,newsId:n});case 4:a.setState({resultSuggestForToday:K({},a.state.resultSuggestForToday,{data:a.state.resultSuggestForToday.data.map(function(e){return e._id===n?K({},e,{isFollowing:!1}):e})})}),e.next=10;break;case 7:return e.next=9,a.props.followReducers.followNews({userId:a.props.profileState.authUser.id,newsId:n});case 9:a.setState({resultSuggestForToday:K({},a.state.resultSuggestForToday,{data:a.state.resultSuggestForToday.data.map(function(e){return e._id===n?K({},e,{isFollowing:!0}):e})})});case 10:e.next=15;break;case 12:return e.next=14,a.props.profileReducers.openModal({modalName:"login"});case 14:c.a.warning("Bạn cần đăng nhập để thực hiện chức năng này!");case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),z(X(a),"changeRecentViewedFollowStatus",function(){var e=Y(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.profileState||!a.props.profileState.authUser){e.next=12;break}if("filled"!==t){e.next=7;break}return e.next=4,a.props.followReducers.unfollowNews({userId:a.props.profileState.authUser.id,newsId:n});case 4:a.setState({recentViewed:K({},a.state.recentViewed,{data:a.state.recentViewed.data.map(function(e){return e.news._id===n?K({},e,{news:K({},e.news,{isFollowing:!1})}):e})})}),e.next=10;break;case 7:return e.next=9,a.props.followReducers.followNews({userId:a.props.profileState.authUser.id,newsId:n});case 9:a.setState({recentViewed:K({},a.state.recentViewed,{data:a.state.recentViewed.data.map(function(e){return e.news._id===n?K({},e,{news:K({},e.news,{isFollowing:!0})}):e})})});case 10:e.next=15;break;case 12:return e.next=14,a.props.profileReducers.openModal({modalName:"login"});case 14:c.a.warning("Bạn cần đăng nhập để thực hiện chức năng này!");case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),z(X(a),"onSeeMoreCityListButtonClick",function(){a.setState({seeMoreClicked:!0})}),z(X(a),"fetchDataDynamic",function(){var e=Y(o.a.mark(function e(t,a,n,r,s){var i,c,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=S.isMobile?4:8,c=Object(V.a)(),e.next=4,c.searchElasticsearch(void 0,void 0,void 0,void 0,void 0,void 0,a,t,void 0,void 0,void 0,s,void 0,void 0,void 0,i,"elasticsearchCreatedAt|desc",n,r);case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}},e)}));return function(t,a,n,o,r){return e.apply(this,arguments)}}()),z(X(a),"getDataMostFollow",function(){var e=Y(o.a.mark(function e(t,a){var n,r,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=S.isMobile?2:4,"counterFollow","_id",r=Object(V.a)(),e.next=6,r.searchNewsMostFollow(void 0,n,"counterFollow","_id",t,a);case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),z(X(a),"getDataInTabs",function(){var e=Y(o.a.mark(function e(t,n,r,s,i){var c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.searchReducers.changeTabsOnHomePage(t),a.props.searchReducers.changeStatusNewsTypeSearch(n),0!==s){e.next=8;break}return a.props.searchReducers.activeLoading(i),e.next=6,a.fetchDataDynamic(n,r,void 0,void 0,void 0);case 6:c=e.sent,a.props.searchReducers.getDataInTabsSuccess({result:c,newsType:n});case 8:case"end":return e.stop()}},e)}));return function(t,a,n,o,r){return e.apply(this,arguments)}}()),z(X(a),"onChangeTabs",function(){var e=Y(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="1"===e.t0?3:"2"===e.t0?5:"3"===e.t0?7:"4"===e.t0?9:16;break;case 3:return a.getDataInTabs("1","SELL",void 0,a.props.searchState.dataTotal.dataSell.data.length,{isLoadingDataSell:!0}),e.abrupt("break",16);case 5:return a.getDataInTabs("2","BUY","RENT",a.props.searchState.dataTotal.dataBuy.data.length,{isLoadingDataBuy:!0}),e.abrupt("break",16);case 7:return a.getDataInTabs("3","LEASE",void 0,a.props.searchState.dataTotal.dataLease.data.length,{isLoadingDataLease:!0}),e.abrupt("break",16);case 9:if(!a.props.profileData||!a.props.profileData.province){e.next=16;break}return a.setState({isLoadingNearestMachine:!0}),a.props.searchReducers.changeStatusNewsTypeSearch("NEAREST"),e.next=14,a.fetchDataDynamic(void 0,void 0,void 0,void 0,a.props.profileData.province);case 14:n=e.sent,a.setState({newsDataNearestMachine:n,isLoadingNearestMachine:!1});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),z(X(a),"getDataForButton",function(){var e=Y(o.a.mark(function e(t,n,r,s,i){var c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&void 0===n){e.next=6;break}return a.props.searchReducers.activeLoading(r),e.next=4,a.fetchDataDynamic(s,i,t,n,void 0);case 4:c=e.sent,a.props.searchReducers.getDataInTabsSuccess({result:c,newsType:a.props.searchState.statusNewsTypeSearch});case 6:case"end":return e.stop()}},e)}));return function(t,a,n,o,r){return e.apply(this,arguments)}}()),z(X(a),"onClickButtonLeft",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a.props.searchState.statusNewsTypeSearch,e.next="SELL"===e.t0?3:"BUY"===e.t0?5:"LEASE"===e.t0?7:"NEAREST"===e.t0?9:17;break;case 3:return a.getDataForButton(a.props.searchState.dataTotal.dataSell.before,void 0,{isLoadingDataSell:!0},"SELL",void 0),e.abrupt("break",17);case 5:return a.getDataForButton(a.props.searchState.dataTotal.dataBuy.before,void 0,{isLoadingDataBuy:!0},"BUY","RENT"),e.abrupt("break",17);case 7:return a.getDataForButton(a.props.searchState.dataTotal.dataLease.before,void 0,{isLoadingDataLease:!0},"LEASE",void 0),e.abrupt("break",17);case 9:if(a.setState({isLoadingNearestMachine:!0}),!(t=a.state.newsDataNearestMachine.before)){e.next=16;break}return e.next=14,a.fetchDataDynamic(void 0,void 0,t,void 0,a.props.profileState.authUser.province);case 14:n=e.sent,a.setState({isLoadingNearestMachine:!1,newsDataNearestMachine:n});case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}},e)}))),z(X(a),"onClickButtonRight",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a.props.searchState.statusNewsTypeSearch,e.next="SELL"===e.t0?3:"BUY"===e.t0?5:"LEASE"===e.t0?7:"NEAREST"===e.t0?9:17;break;case 3:return a.getDataForButton(void 0,a.props.searchState.dataTotal.dataSell.after,{isLoadingDataSell:!0},"SELL",void 0),e.abrupt("break",17);case 5:return a.getDataForButton(void 0,a.props.searchState.dataTotal.dataBuy.after,{isLoadingDataBuy:!0},"BUY","RENT"),e.abrupt("break",17);case 7:return a.getDataForButton(void 0,a.props.searchState.dataTotal.dataLease.after,{isLoadingDataLease:!0},"LEASE",void 0),e.abrupt("break",17);case 9:if(a.setState({isLoadingNearestMachine:!0}),!(t=a.state.newsDataNearestMachine.after)){e.next=16;break}return e.next=14,a.fetchDataDynamic(void 0,void 0,void 0,t,a.props.profileState.authUser.province);case 14:n=e.sent,a.setState({isLoadingNearestMachine:!1,newsDataNearestMachine:n});case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}},e)}))),z(X(a),"onClickButtonRightMostFollow",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.searchReducers.activeLoading({isLoadingDataMostFollow:!0}),void 0===(t=a.props.searchState.dataTotal.dataMostFollow.after)){e.next=7;break}return e.next=5,a.getDataMostFollow(void 0,t);case 5:n=e.sent,a.props.searchReducers.getDataMostFollowSuccess(n);case 7:case"end":return e.stop()}},e)}))),z(X(a),"onClickButtonLeftMostFollow",Y(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.searchReducers.activeLoading({isLoadingDataMostFollow:!0}),void 0===(t=a.props.searchState.dataTotal.dataMostFollow.before)){e.next=7;break}return e.next=5,a.getDataMostFollow(t,void 0);case 5:n=e.sent,a.props.searchReducers.getDataMostFollowSuccess(n);case 7:case"end":return e.stop()}},e)}))),z(X(a),"changeFollowStatus",function(){var e=Y(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.profileState||!a.props.profileState.authUser){e.next=12;break}if("filled"!==t){e.next=7;break}return e.next=4,a.props.followReducers.unfollowNews({userId:a.props.profileState.authUser.id,newsId:n});case 4:a.props.searchReducers.onFollowChangeOnHomeScreenSuccess({starStatus:t,newsId:n}),e.next=10;break;case 7:return e.next=9,a.props.followReducers.followNews({userId:a.props.profileState.authUser.id,newsId:n});case 9:a.props.searchReducers.onFollowChangeOnHomeScreenSuccess({starStatus:t,newsId:n});case 10:e.next=15;break;case 12:return e.next=14,a.props.profileReducers.openModal({modalName:"login"});case 14:c.a.warning("Bạn cần đăng nhập để thực hiện chức năng này!");case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),z(X(a),"changeMostFollowNewsFollowStatus",function(){var e=Y(o.a.mark(function e(t,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.profileState||!a.props.profileState.authUser){e.next=12;break}if("filled"!==t){e.next=7;break}return e.next=4,a.props.followReducers.unfollowNews({userId:a.props.profileState.authUser.id,newsId:n});case 4:a.props.searchReducers.onFollowChangeMostFollowNewsSuccess({starStatus:t,newsId:n}),e.next=10;break;case 7:return e.next=9,a.props.followReducers.followNews({userId:a.props.profileState.authUser.id,newsId:n});case 9:a.props.searchReducers.onFollowChangeMostFollowNewsSuccess({starStatus:t,newsId:n});case 10:e.next=15;break;case 12:return e.next=14,a.props.profileReducers.openModal({modalName:"login"});case 14:c.a.warning("Bạn cần đăng nhập để thực hiện chức năng này!");case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()),z(X(a),"isShowButton",function(e){return void 0===e}),z(X(a),"onSeeMoreTotalMachineClick",function(){a.setState({seeMoreTotalMachineClicked:!a.state.seeMoreTotalMachineClicked})}),a}var a,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r["Component"]),a=t,(n=[{key:"componentDidMount",value:function(){this.getCategories(),this.getProvinces(),this.getCommonKeywords(),this.getResultSuggestForToday(),this.getMostFollowNews(),this.getRecentViewedData()}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"home-page-screen"},r.createElement(_.a,null,r.createElement("title",null,"Chợ máy công trình | timmay.vn"),r.createElement("meta",{property:"fb:app_id",content:U.a.facebookAppId}),r.createElement("meta",{property:"description",content:"Chợ máy công trình"}),r.createElement("meta",{property:"og:url",content:U.a.url.main}),r.createElement("meta",{property:"og:type",content:"website"}),r.createElement("meta",{property:"og:title",content:"Chợ máy công trình | timmay.vn"}),r.createElement("meta",{property:"og:description",content:"Chợ máy công trình"}),r.createElement("meta",{property:"og:image:url",content:"/static/images/logo-timmay.png"}),r.createElement("meta",{property:"og:image:width",content:"800"}),r.createElement("meta",{property:"og:image:height",content:"600"})),r.createElement(j.a,null),r.createElement(C.c,{commonKeywords:this.state.commonKeywords,searchKeyword:this.props.searchKeyword,profileState:this.props.profileState,profileReducers:this.props.profileReducers,updateFilters:this.props.searchReducers.updateFilters}),r.createElement(C.d,{hasSideBar:!0,hasMenuItems:!0,topBrands:this.props.topBrands,hasBrandList:!0},r.createElement(F,{commonKeywords:this.state.commonKeywords,recentViewedData:this.state.recentViewed.data,isLoadingRecentViewed:this.state.isLoadingRecentViewed,getRecentViewedNextPage:this.getRecentViewedNextPage,getRecentViewedPrevPage:this.getRecentViewedPrevPage,hasRecentViewedNextPage:!Boolean(this.state.recentViewed.after),hasRecentViewedPrevPage:!Boolean(this.state.recentViewed.before),categories:this.state.categories,profileState:this.props.profileState,profileData:this.props.profileData,profileReducers:this.props.profileReducers,popularMachine:D,provinces:this.state.provinces,seeMoreClicked:this.state.seeMoreClicked,onSeeMoreCityListButtonClick:this.onSeeMoreCityListButtonClick,resultSuggestForToday:this.state.resultSuggestForToday,changeFollowStatus:this.changeFollowStatus,onChangeTabs:this.onChangeTabs,searchState:this.props.searchState,buttonLeft:this.onClickButtonLeft,buttonRight:this.onClickButtonRight,disabledButtonLeft:function(){switch(e.props.searchState.statusNewsTypeSearch){case"SELL":return e.isShowButton(e.props.searchState.dataTotal.dataSell.before);case"BUY":return e.isShowButton(e.props.searchState.dataTotal.dataBuy.before);case"LEASE":return e.isShowButton(e.props.searchState.dataTotal.dataLease.before);case"NEAREST":return e.isShowButton(e.state.newsDataNearestMachine.before);default:return null}}(),disabledButtonRight:function(){switch(e.props.searchState.statusNewsTypeSearch){case"SELL":return e.isShowButton(e.props.searchState.dataTotal.dataSell.after);case"BUY":return e.isShowButton(e.props.searchState.dataTotal.dataBuy.after);case"LEASE":return e.isShowButton(e.props.searchState.dataTotal.dataLease.after);case"NEAREST":return e.isShowButton(e.state.newsDataNearestMachine.after);default:return null}}(),buttonLeftMostFollow:this.onClickButtonLeftMostFollow,buttonRightMostFollow:this.onClickButtonRightMostFollow,disabledButtonLeftMostFollow:this.isShowButton(this.props.searchState.dataTotal.dataMostFollow.before),disabledButtonRightMostFollow:this.isShowButton(this.props.searchState.dataTotal.dataMostFollow.after),changeMostFollowNewsFollowStatus:this.changeMostFollowNewsFollowStatus,changeRecentViewedFollowStatus:this.changeRecentViewedFollowStatus,changeSuggestForTodayFollowStatus:this.changeSuggestForTodayFollowStatus,isLoadingNearestMachine:this.state.isLoadingNearestMachine,newsDataNearestMachine:this.state.newsDataNearestMachine,seeMoreTotalMachineClicked:this.state.seeMoreTotalMachineClicked,onSeeMoreTotalMachineClick:this.onSeeMoreTotalMachineClick})),r.createElement(O.a,null))}}])&&H(a.prototype,n),s&&H(a,s),t}(),W=Object(g.d)("index")(J),Z=a(21),$=a(925);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],n=!0,o=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw r}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ae(e,t,a,n,o,r,s){try{var i=e[r](s),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function ne(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,re(t).apply(this,arguments))}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,s.a.Component),a=t,n=[{key:"render",value:function(){return s.a.createElement(W,{topBrands:this.props.topBrands,followState:this.props.followState,followReducers:this.props.followReducers,searchState:this.props.searchState,searchReducers:this.props.searchReducers,profileState:this.props.profileState,profileReducers:this.props.profileReducers,searchKeyword:this.props.searchState.filters.keyword,resultSearchNewestPost:this.props.resultSearchNewestPost,profileData:this.props.profileData})}}],r=[{key:"getInitialProps",value:function(){var e,t=(e=o.a.mark(function e(t){var a,n,r,s,i,c,l,u,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object($.a)(t.req)?4:8,r=t.req?t.req.cookies.token:P.get("token"),n=Object(V.a)(r),s=[n.searchElasticsearch(void 0,void 0,void 0,void 0,void 0,void 0,void 0,"SELL",void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,"elasticsearchCreatedAt|desc",void 0,void 0),n.findTopBrands()],r&&s.push(n.findProfile()),e.next=7,Promise.all(s);case 7:return i=e.sent,c=te(i,3),l=c[0],u=c[1],p=c[2],t.store.dispatch.searchModel.getDataInTabsSuccess({result:l,newsType:"SELL"}),e.abrupt("return",{namespacesRequired:["common","index"],resultSearchNewestPost:l,topBrands:u.data,profileData:p||{}});case 14:case"end":return e.stop()}},e)}),function(){var t=this,a=arguments;return new Promise(function(n,o){var r=e.apply(t,a);function s(e){ae(r,n,o,s,i,"next",e)}function i(e){ae(r,n,o,s,i,"throw",e)}s(void 0)})});return function(e){return t.apply(this,arguments)}}()}],n&&ne(a.prototype,n),r&&ne(a,r),t}();t.default=Object(Z.withRematch)(Z.initStore,function(e){return{profileState:e.profileModel,searchState:e.searchModel,followState:e.followModel}},function(e){return{profileReducers:e.profileModel,searchReducers:e.searchModel,followReducers:e.followModel}})(Object(g.d)("index")(ie))}},[[2062,1,0,2]]]);