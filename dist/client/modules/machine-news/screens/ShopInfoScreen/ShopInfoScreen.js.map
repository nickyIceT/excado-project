{"version":3,"sources":["../../../../../../src/client/modules/machine-news/screens/ShopInfoScreen/ShopInfoScreen.tsx"],"names":["ShopInfoScreen","shopInfo","props","newsData","starStatus","id","profileState","authUser","followReducers","unfollowShop","authId","shopId","setState","state","isFollowing","followShop","warning","unfollowNews","userId","newsId","map","value","_id","followNews","name","config","facebookAppId","description","domain","introImages","length","logoImage","t","changeFollowShopStatus","resultSearchNewestPost","changeFollowItemStatus","Component"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { message } from 'antd';\nimport NavBarStore from './components/NavBarStore';\nimport ShopInfoDetails from './components/ShopInfoDetails';\nimport { Shop, News } from '@client/services/service-proxies';\nimport { ProfileState, ProfileEffects, ProfileReducers, FollowState, FollowReducers, FollowEffects } from '@client/store';\nimport { withNamespaces } from '@client/i18n';\n\nimport Head from 'next/head';\nimport { config } from '@client/config';\nimport { getShopUrl } from '@client/core';\ninterface Props {\n  shopInfo: Shop;\n  newsData: News[];\n  resultSearchNewestPost: any;\n  profileState: ProfileState;\n  profileReducers: ProfileReducers & ProfileEffects;\n  followState: FollowState;\n  followReducers: FollowReducers & FollowEffects;\n  t: (key: string) => string;\n}\ninterface State { }\nclass ShopInfoScreen extends Component<Props, State> {\n  state = {\n    shopInfo: this.props.shopInfo,\n    newsData: this.props.newsData,\n  };\n\n  changeFollowShopStatus = async (starStatus: string, id: string) => {\n    if (this.props.profileState && this.props.profileState.authUser) {\n      if (starStatus === 'filled') {\n        await this.props.followReducers.unfollowShop({\n          authId: (this.props.profileState.authUser as any).id,\n          shopId: id,\n        });\n        this.setState({\n          shopInfo: {\n            ...this.state.shopInfo,\n            isFollowing: false,\n          },\n        });\n      } else {\n        await this.props.followReducers.followShop({\n          authId: (this.props.profileState.authUser as any).id,\n          shopId: id,\n        });\n        this.setState({\n          shopInfo: {\n            ...this.state.shopInfo,\n            isFollowing: true,\n          },\n        });\n      }\n    } else {\n      message.warning('Bạn cần đăng nhập để thực hiện chức năng này!');\n    }\n  }\n  changeFollowItemStatus = async (starStatus: string, id: string) => {\n    if (this.props.profileState && this.props.profileState.authUser) {\n      if (starStatus === 'filled') {\n        await this.props.followReducers.unfollowNews({\n          userId: (this.props.profileState.authUser as any).id,\n          newsId: id,\n        });\n        this.setState({\n          newsData: this.state.newsData.map((value: any) => {\n            if (value._id === id) {\n              return {\n                ...value,\n                isFollowing: false,\n              };\n            } else {\n              return value;\n            }\n          }),\n        });\n      } else {\n        await this.props.followReducers.followNews({\n          userId: (this.props.profileState.authUser as any).id,\n          newsId: id,\n        });\n        this.setState({\n          newsData: this.state.newsData.map((value: any) => {\n            if (value._id === id) {\n              return {\n                ...value,\n                isFollowing: true,\n              };\n            } else {\n              return value;\n            }\n          }),\n        });\n      }\n    } else {\n      message.warning('Bạn cần đăng nhập để thực hiện chức năng này!');\n    }\n  }\n  render() {\n    return (\n      <Fragment>\n        <Head>\n          <title>{`${this.props.shopInfo.name}| timmay.vn`}</title>\n          <meta property='fb:app_id' content={config.facebookAppId} />\n          <meta property='description' content={this.props.shopInfo.description} />\n          <meta property='og:url' content={getShopUrl(this.props.shopInfo.domain)} />\n          <meta property='og:type' content='website' />\n          <meta property='og:title' content={`Cửa hàng ${this.props.shopInfo.name} | timmay.vn`} />\n          <meta property='og:description' content={this.props.shopInfo.description} />\n          <meta property='og:image:url' content={this.props.shopInfo.introImages.length > 0 ? this.props.shopInfo.introImages[0] : '/static/images/logo-timmay.png'} />\n          <meta property='og:image:width' content='800' />\n          <meta property='og:image:height' content='600' />\n        </Head>\n\n        <NavBarStore\n          linkLogoStore={this.props.shopInfo.logoImage}\n          shopName={this.props.shopInfo.name}\n          t={this.props.t}\n        />\n\n        <ShopInfoDetails\n          newsData={this.state.newsData}\n          shopInfo={this.state.shopInfo}\n          starStatus={this.state.shopInfo.isFollowing ? 'filled' : ''}\n          changeFollowStatus={this.changeFollowShopStatus}\n          resultSearchNewestPost={this.props.resultSearchNewestPost}\n          changeFollowItemStatus={this.changeFollowItemStatus}\n          profileState={this.props.profileState}\n          t={this.props.t}\n        />\n      </Fragment>\n    );\n  }\n}\n\nexport default withNamespaces('shop-info')(ShopInfoScreen);\n"],"file":"ShopInfoScreen.js"}