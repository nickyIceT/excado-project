{"version":3,"sources":["../../../../../../src/client/modules/admin/screens/AdminStatisticsScreen/AdminStatisticsScreen.tsx"],"names":["AdminStatistics","loading","data","daysOfWeek","hoursOfDay","brands","categories","provinces","showAll","key","setState","state","dates","length","startDate","Date","toISOString","endDate","firebase","auth","currentUser","getIdToken","idToken","serviceProxy","findNewsStatisticsInfo","statisticsData","error","message","tables","document","getElementsByTagName","workSheets","Array","from","map","item","utils","table_to_sheet","jsonData","sheet_to_json","header","result","concat","forEach","worksheet","json_to_sheet","skipHeader","workbook","book_new","book_append_sheet","file","FileSaver","saveAs","translate","props","t","dateFormat","daysOfWeekData","_id","totalNews","daysOfWeekColumns","title","dataIndex","render","_text","record","hoursOfDayColumns","hoursOfDayData","hour","Number","brandsColumns","sorter","a","b","name","categoriesColumns","locationsColumns","marginBottom","getStatisticsInfo","exportExcel","x","sort","slice","React","Component","mapState","rootState","profileState","profileModel","mapDispatch","_rootReducer","AdminStatisticsScreen","initStore"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAcMA,e;;;;;;;;;;;;;;;;;;4DACW;AACbC,MAAAA,OAAO,EAAE,KADI;AAEbC,MAAAA,IAAI,EAAE;AACJC,QAAAA,UAAU,EAAE,EADR;AAEJC,QAAAA,UAAU,EAAE,EAFR;AAGJC,QAAAA,MAAM,EAAE,EAHJ;AAIJC,QAAAA,UAAU,EAAE,EAJR;AAKJC,QAAAA,SAAS,EAAE;AALP,OAFO;AASbC,MAAAA,OAAO,EAAE;AACPH,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,UAAU,EAAE,KAFL;AAGPC,QAAAA,SAAS,EAAE;AAHJ;AATI,K;;8DAgBL,UAACE,GAAD,EAAiB;AACzB,YAAKC,QAAL,CAAc;AACZF,QAAAA,OAAO,oBACF,MAAKG,KAAL,CAAWH,OADT,sBAEJC,GAFI,EAEE,IAFF;AADK,OAAd;AAMD,K;;;;;;;gCAEmB,iBAAOG,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACdA,KAAK,CAACC,MAAN,KAAiB,CADH;AAAA;AAAA;AAAA;;AAAA;;AAGd,sBAAKH,QAAL,CAAc;AACZT,kBAAAA,OAAO,EAAE;AADG,iBAAd;;AAIMa,gBAAAA,SAPQ,GAOI,IAAIC,IAAJ,CAASH,KAAK,CAAC,CAAD,CAAd,EAAmBI,WAAnB,EAPJ;AAQRC,gBAAAA,OARQ,GAQE,IAAIF,IAAJ,CAASH,KAAK,CAAC,CAAD,CAAd,EAAmBI,WAAnB,EARF;AAAA;AAAA,uBASQE,aAASC,IAAT,GAAgBC,WAAhB,CAA6BC,UAA7B,EATR;;AAAA;AASRC,gBAAAA,OATQ;AAURC,gBAAAA,YAVQ,GAUO,+BAAgBD,OAAhB,CAVP;AAAA;AAAA,uBAWeC,YAAY,CAACC,sBAAb,CAAoCV,SAApC,EAA+CG,OAA/C,CAXf;;AAAA;AAWRQ,gBAAAA,cAXQ;;AAad,sBAAKf,QAAL,CAAc;AACZT,kBAAAA,OAAO,EAAE,KADG;AAEZC,kBAAAA,IAAI,EAAE;AACJC,oBAAAA,UAAU,EAAEsB,cAAc,CAACtB,UADvB;AAEJC,oBAAAA,UAAU,EAAEqB,cAAc,CAACrB,UAFvB;AAGJC,oBAAAA,MAAM,EAAEoB,cAAc,CAACpB,MAHnB;AAIJC,oBAAAA,UAAU,EAAEmB,cAAc,CAACnB,UAJvB;AAKJC,oBAAAA,SAAS,EAAEkB,cAAc,CAAClB;AALtB;AAFM,iBAAd;;AAbc;AAAA;;AAAA;AAAA;AAAA;;AAwBd,kCAAQmB,KAAR,CAAc,YAAMC,OAApB;;AACA,sBAAKjB,QAAL,CAAc;AACZT,kBAAAA,OAAO,EAAE;AADG,iBAAd;;AAzBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;kEAgCN,YAAM;AAClB,UAAI;AACF,YAAM2B,MAAM,GAAGC,QAAQ,CAACC,oBAAT,CAA8B,OAA9B,CAAf;AACA,YAAMC,UAAU,GAAGC,KAAK,CAACC,IAAN,CAAWL,MAAX,EAAmBM,GAAnB,CAAuB,UAACC,IAAD;AAAA,iBAAUC,YAAMC,cAAN,CAAqBF,IAArB,CAAV;AAAA,SAAvB,CAAnB;AACA,YAAMG,QAAQ,GAAGP,UAAU,CAACG,GAAX,CAAe,UAACC,IAAD;AAAA,iBAAUC,YAAMG,aAAN,CAAoBJ,IAApB,EAA0B;AAAEK,YAAAA,MAAM,EAAE;AAAV,WAA1B,CAAV;AAAA,SAAf,CAAjB;AACA,YAAIC,MAAW,GAAG,EAAlB;AACAA,QAAAA,MAAM,CAACC,MAAP,CAAcJ,QAAQ,CAAC,CAAD,CAAtB;AACAA,QAAAA,QAAQ,CAACK,OAAT,CAAiB,UAACR,IAAD,EAAU;AACzBM,UAAAA,MAAM,GAAGA,MAAM,CAACC,MAAP,CAAcP,IAAd,EAAoBO,MAApB,CAA2B,CAAC,EAAD,CAA3B,CAAT;AACD,SAFD;;AAGA,YAAME,SAAS,GAAGR,YAAMS,aAAN,CAAoBJ,MAApB,EAA4B;AAAEK,UAAAA,UAAU,EAAE;AAAd,SAA5B,CAAlB;;AACA,YAAMC,QAAQ,GAAGX,YAAMY,QAAN,EAAjB;;AACAZ,oBAAMa,iBAAN,CAAwBF,QAAxB,EAAkCH,SAAlC,EAA6C,WAA7C;;AACA,YAAMM,IAAI,GAAG,qBAAUH,QAAV,EAAoB,uBAApB,CAAb;AACAI,QAAAA,SAAS,CAACC,MAAV,CAAiBF,IAAjB,EAAuB,uBAAvB;AACD,OAdD,CAcE,OAAOxB,KAAP,EAAc,CACd;AACD;AACF,K;;;;;;;6BAES;AAAA;;AACR,UAAM2B,SAAS,GAAG,KAAKC,KAAL,CAAWC,CAA7B;AAEA,UAAMC,UAAU,GAAG,YAAnB;AAEA,UAAMC,cAAc,GAAG,EAAvB;AACA,WAAK9C,KAAL,CAAWT,IAAX,CAAgBC,UAAhB,CAA2BwC,OAA3B,CAAmC,UAACR,IAAD,EAAU;AAC3CsB,QAAAA,cAAc,CAACtB,IAAI,CAACuB,GAAN,CAAd,GAA2BvB,IAAI,CAACwB,SAAL,GAAiBxB,IAAI,CAACwB,SAAtB,GAAkC,CAA7D;AACD,OAFD;AAIA,UAAMC,iBAAsB,GAAG,CAC7B;AACEC,QAAAA,KAAK,EAAER,SAAS,CAAC,sBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,WAFb;AAGErD,QAAAA,GAAG,EAAE,WAHP;AAIEsD,QAAAA,MAAM,EAAE;AAAA,iBAAMV,SAAS,CAAC,4BAAD,CAAf;AAAA;AAJV,OAD6B,EAO7B;AACEQ,QAAAA,KAAK,EAAER,SAAS,CAAC,yBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAP6B,EAa7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,0BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAb6B,EAmB7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,4BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAnB6B,EAyB7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,2BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAzB6B,EA+B7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,yBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OA/B6B,EAqC7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,2BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OArC6B,EA2C7B;AACEJ,QAAAA,KAAK,EAAER,SAAS,CAAC,yBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OA3C6B,CAA/B;AAmDA,UAAMC,iBAAiB,GAAG,CACxB;AACEL,QAAAA,KAAK,EAAER,SAAS,CAAC,uBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,WAFb;AAGErD,QAAAA,GAAG,EAAE,WAHP;AAIEsD,QAAAA,MAAM,EAAE;AAAA,iBAAMV,SAAS,CAAC,4BAAD,CAAf;AAAA;AAJV,OADwB,EAOxB;AACEQ,QAAAA,KAAK,SADP;AAEEC,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAPwB,EAaxB;AACEJ,QAAAA,KAAK,SADP;AAEEC,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAbwB,EAmBxB;AACEJ,QAAAA,KAAK,SADP;AAEEC,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAnBwB,EAyBxB;AACEJ,QAAAA,KAAK,SADP;AAEEC,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OAzBwB,EA+BxB;AACEJ,QAAAA,KAAK,UADP;AAEEC,QAAAA,SAAS,EAAE,GAFb;AAGErD,QAAAA,GAAG,EAAE,GAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,GAAD,CAAN,GAAcA,MAAM,CAAC,GAAD,CAApB,GAA4B,CAA5D;AAAA;AAJV,OA/BwB,EAqCxB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OArCwB,EA2CxB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OA3CwB,EAiDxB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OAjDwB,EAuDxB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OAvDwB,EA6DxB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OA7DwB,EAmExB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OAnEwB,EAyExB;AACEJ,QAAAA,KAAK,WADP;AAEEC,QAAAA,SAAS,EAAE,IAFb;AAGErD,QAAAA,GAAG,EAAE,IAHP;AAIEsD,QAAAA,MAAM,EAAE,gBAACC,KAAD,EAAgBC,MAAhB;AAAA,iBAAgCA,MAAM,CAAC,IAAD,CAAN,GAAeA,MAAM,CAAC,IAAD,CAArB,GAA8B,CAA9D;AAAA;AAJV,OAzEwB,CAA1B;AAiFA,UAAME,cAAc,GAAG,EAAvB;AACA,WAAKxD,KAAL,CAAWT,IAAX,CAAgBE,UAAhB,CAA2BuC,OAA3B,CAAmC,UAACyB,IAAD,EAAU;AAC3C,YAAIC,MAAM,CAACD,IAAI,CAACV,GAAN,CAAN,GAAmB,CAAnB,KAAyB,CAA7B,EAAgC;AAC9BS,UAAAA,cAAc,CAACE,MAAM,CAACD,IAAI,CAACV,GAAN,CAAP,CAAd,GAAmCW,MAAM,CAACD,IAAI,CAACT,SAAN,CAAzC;AACD,SAFD,MAEO;AACLQ,UAAAA,cAAc,CAACE,MAAM,CAACD,IAAI,CAACV,GAAN,CAAN,GAAmB,CAApB,CAAd,GAAuCS,cAAc,CAACE,MAAM,CAACD,IAAI,CAACV,GAAN,CAAN,GAAmB,CAApB,CAAd,IAAwCW,MAAM,CAACD,IAAI,CAACT,SAAN,CAArF,GAAwGQ,cAAc,CAACE,MAAM,CAACD,IAAI,CAACV,GAAN,CAAN,GAAmB,CAApB,CAAd,GAAuCW,MAAM,CAACD,IAAI,CAACT,SAAN,CAArJ;AACD;AACF,OAND;AAQA,UAAMW,aAAa,GAAG,CACpB;AACET,QAAAA,KAAK,EAAER,SAAS,CAAC,wBAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,MAFb;AAGErD,QAAAA,GAAG,EAAE,MAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACE,IAAF,GAASD,CAAC,CAACC,IAA/B;AAAA;AAJV,OADoB,EAOpB;AACEb,QAAAA,KAAK,EAAER,SAAS,CAAC,4BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,WAFb;AAGErD,QAAAA,GAAG,EAAE,WAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACb,SAAF,GAAcc,CAAC,CAACd,SAApC;AAAA;AAJV,OAPoB,CAAtB;AAeA,UAAMgB,iBAAiB,GAAG,CACxB;AACEd,QAAAA,KAAK,EAAER,SAAS,CAAC,2BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,MAFb;AAGErD,QAAAA,GAAG,EAAE,MAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACE,IAAF,GAASD,CAAC,CAACC,IAA/B;AAAA;AAJV,OADwB,EAOxB;AACEb,QAAAA,KAAK,EAAER,SAAS,CAAC,4BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,WAFb;AAGErD,QAAAA,GAAG,EAAE,WAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACb,SAAF,GAAcc,CAAC,CAACd,SAApC;AAAA;AAJV,OAPwB,CAA1B;AAeA,UAAMiB,gBAAgB,GAAG,CACvB;AACEf,QAAAA,KAAK,EAAER,SAAS,CAAC,2BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,MAFb;AAGErD,QAAAA,GAAG,EAAE,MAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACE,IAAF,GAASD,CAAC,CAACC,IAA/B;AAAA;AAJV,OADuB,EAOvB;AACEb,QAAAA,KAAK,EAAER,SAAS,CAAC,4BAAD,CADlB;AAEES,QAAAA,SAAS,EAAE,WAFb;AAGErD,QAAAA,GAAG,EAAE,WAHP;AAIE8D,QAAAA,MAAM,EAAE,gBAACC,CAAD,EAASC,CAAT;AAAA,iBAAoBD,CAAC,CAACb,SAAF,GAAcc,CAAC,CAACd,SAApC;AAAA;AAJV,OAPuB,CAAzB;AAeA,aACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,KAAK,EAAE;AAACkB,UAAAA,YAAY,EAAE;AAAf;AAAZ,SACE;AAAK,QAAA,EAAE,EAAE;AAAT,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE,iDAAY,WAAZ;AACE,QAAA,WAAW,EAAE,CAACxB,SAAS,CAAC,4BAAD,CAAV,EAA0CA,SAAS,CAAC,0BAAD,CAAnD,CADf;AAEE,QAAA,MAAM,EAAEG,UAFV;AAGE,QAAA,gBAAgB,EAAE,0BAAC5C,KAAD;AAAA,iBAAgB,MAAI,CAACkE,iBAAL,CAAuBlE,KAAvB,CAAhB;AAAA;AAHpB,QADF,EAME;AAAQ,QAAA,QAAQ,EAAC,QAAjB;AAA0B,QAAA,IAAI,EAAC,SAA/B;AAAyC,QAAA,IAAI,EAAC,UAA9C;AAAyD,QAAA,OAAO,EAAE,KAAKmE;AAAvE,SACG1B,SAAS,CAAC,gCAAD,CADZ,CANF,CADF,CADF,CADF,EAgBE;AACE,QAAA,QAAQ,EAAE,IADZ;AAEE,QAAA,OAAO,EAAEO,iBAFX;AAGE,QAAA,UAAU,EAAE,KAAKjD,KAAL,CAAWT,IAAX,CAAgBC,UAAhB,CAA2BU,MAA3B,GAAoC,CAApC,GAAwC,CAAC4C,cAAD,CAAxC,GAA2D,EAHzE;AAIE,QAAA,UAAU,EAAE,KAJd;AAKE,QAAA,MAAM,EAAE;AAACuB,UAAAA,CAAC,EAAE;AAAJ,SALV;AAME,QAAA,KAAK,EAAE;AAACH,UAAAA,YAAY,EAAE;AAAf,SANT;AAOE,QAAA,MAAM,EAAE,gBAACZ,MAAD;AAAA,iBAAiBA,MAAM,CAACP,GAAxB;AAAA,SAPV;AAQE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWV;AARtB,QAhBF,EA2BE;AACE,QAAA,QAAQ,EAAE,IADZ;AAEE,QAAA,OAAO,EAAEiE,iBAFX;AAGE,QAAA,UAAU,EAAE,KAAKvD,KAAL,CAAWT,IAAX,CAAgBE,UAAhB,CAA2BS,MAA3B,GAAoC,CAApC,GAAwC,CAACsD,cAAD,CAAxC,GAA2D,EAHzE;AAIE,QAAA,UAAU,EAAE,KAJd;AAKE,QAAA,MAAM,EAAE;AAACa,UAAAA,CAAC,EAAE;AAAJ,SALV;AAME,QAAA,KAAK,EAAE;AAACH,UAAAA,YAAY,EAAE;AAAf,SANT;AAOE,QAAA,MAAM,EAAE,gBAACZ,MAAD;AAAA,iBAAiBA,MAAM,CAACP,GAAxB;AAAA,SAPV;AAQE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWV;AARtB,QA3BF,EAsCE;AAAK,QAAA,IAAI,EAAC,MAAV;AAAiB,QAAA,MAAM,EAAE;AAAzB,SACE;AAAK,QAAA,EAAE,EAAE,EAAT;AAAa,QAAA,EAAE,EAAE;AAAjB,SACE;AACE,QAAA,QAAQ,EAAE,IADZ;AAEE,QAAA,OAAO,EAAEqE,aAFX;AAGE,QAAA,UAAU,EAAE,KAAK3D,KAAL,CAAWH,OAAX,CAAmBH,MAAnB,GAA4B,KAAKM,KAAL,CAAWT,IAAX,CAAgBG,MAAhB,CAAuB4E,IAAvB,CAA4B,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAA5B,CAA5B,GAA+F,KAAKhD,KAAL,CAAWT,IAAX,CAAgBG,MAAhB,CAAuB4E,IAAvB,CAA4B,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAA5B,EAAiEuB,KAAjE,CAAuE,CAAvE,EAA0E,EAA1E,CAH7G;AAIE,QAAA,UAAU,EAAE,KAJd;AAKE,QAAA,KAAK,EAAE;AAACL,UAAAA,YAAY,EAAE;AAAf,SALT;AAME,QAAA,MAAM,EAAE,gBAACZ,MAAD;AAAA,iBAAiBA,MAAM,CAACP,GAAxB;AAAA,SANV;AAOE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWV,OAPtB;AAQE,QAAA,MAAM,EAAE;AAAA,iBAAM,MAAI,CAACU,KAAL,CAAWT,IAAX,CAAgBG,MAAhB,CAAuBQ,MAAvB,GAAgC,EAAhC,IAAsC,CAAC,MAAI,CAACF,KAAL,CAAWH,OAAX,CAAmBH,MAA1D,GAAmE;AAAG,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACG,OAAL,CAAa,QAAb,CAAN;AAAA;AAAZ,aAA2C6C,SAAS,CAAC,0BAAD,CAApD,CAAnE,GAA2J,IAAjK;AAAA;AARV,QADF,CADF,EAaE;AAAK,QAAA,EAAE,EAAE,EAAT;AAAa,QAAA,EAAE,EAAE;AAAjB,SACE;AACE,QAAA,QAAQ,EAAE,IADZ;AAEE,QAAA,OAAO,EAAEsB,iBAFX;AAGE,QAAA,UAAU,EAAE,KAAKhE,KAAL,CAAWH,OAAX,CAAmBF,UAAnB,GAAgC,KAAKK,KAAL,CAAWT,IAAX,CAAgBI,UAAhB,CAA2B2E,IAA3B,CAAgC,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAAhC,CAAhC,GAAuG,KAAKhD,KAAL,CAAWT,IAAX,CAAgBI,UAAhB,CAA2B2E,IAA3B,CAAgC,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAAhC,EAAqEuB,KAArE,CAA2E,CAA3E,EAA8E,EAA9E,CAHrH;AAIE,QAAA,UAAU,EAAE,KAJd;AAKE,QAAA,KAAK,EAAE;AAACL,UAAAA,YAAY,EAAE;AAAf,SALT;AAME,QAAA,MAAM,EAAE,gBAACZ,MAAD;AAAA,iBAAiBA,MAAM,CAACP,GAAxB;AAAA,SANV;AAOE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWV,OAPtB;AAQE,QAAA,MAAM,EAAE;AAAA,iBAAM,MAAI,CAACU,KAAL,CAAWT,IAAX,CAAgBI,UAAhB,CAA2BO,MAA3B,GAAoC,EAApC,IAA0C,CAAC,MAAI,CAACF,KAAL,CAAWH,OAAX,CAAmBF,UAA9D,GAA2E;AAAG,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACE,OAAL,CAAa,YAAb,CAAN;AAAA;AAAZ,aAA+C6C,SAAS,CAAC,0BAAD,CAAxD,CAA3E,GAAuK,IAA7K;AAAA;AARV,QADF,CAbF,EAyBE;AAAK,QAAA,EAAE,EAAE,EAAT;AAAa,QAAA,EAAE,EAAE;AAAjB,SACE;AACE,QAAA,QAAQ,EAAE,IADZ;AAEE,QAAA,OAAO,EAAEuB,gBAFX;AAGE,QAAA,UAAU,EAAE,KAAKjE,KAAL,CAAWH,OAAX,CAAmBD,SAAnB,GAA+B,KAAKI,KAAL,CAAWT,IAAX,CAAgBK,SAAhB,CAA0B0E,IAA1B,CAA+B,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAA/B,CAA/B,GAAqG,KAAKhD,KAAL,CAAWT,IAAX,CAAgBK,SAAhB,CAA0B0E,IAA1B,CAA+B,UAACT,CAAD,EAAIC,CAAJ;AAAA,iBAAUA,CAAC,CAACd,SAAF,GAAca,CAAC,CAACb,SAA1B;AAAA,SAA/B,EAAoEuB,KAApE,CAA0E,CAA1E,EAA6E,EAA7E,CAHnH;AAIE,QAAA,UAAU,EAAE,KAJd;AAKE,QAAA,KAAK,EAAE;AAACL,UAAAA,YAAY,EAAE;AAAf,SALT;AAME,QAAA,MAAM,EAAE,gBAACZ,MAAD;AAAA,iBAAiBA,MAAM,CAACP,GAAxB;AAAA,SANV;AAOE,QAAA,OAAO,EAAE,KAAK/C,KAAL,CAAWV,OAPtB;AAQE,QAAA,MAAM,EAAE;AAAA,iBAAM,MAAI,CAACU,KAAL,CAAWT,IAAX,CAAgBK,SAAhB,CAA0BM,MAA1B,GAAmC,EAAnC,IAAyC,CAAC,MAAI,CAACF,KAAL,CAAWH,OAAX,CAAmBD,SAA7D,GAAyE;AAAG,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACC,OAAL,CAAa,WAAb,CAAN;AAAA;AAAZ,aAA8C6C,SAAS,CAAC,0BAAD,CAAvD,CAAzE,GAAoK,IAA1K;AAAA;AARV,QADF,CAzBF,CAtCF,CADF;AA+ED;;;;EAjW2B8B,eAAMC,S;;AAoWpC,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAoB;AACnC,SAAO;AACLC,IAAAA,YAAY,EAAED,SAAS,CAACE;AADnB,GAAP;AAGD,CAJD;;AAMA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,YAAD,EAAuB;AACzC,SAAO,EAAP;AACD,CAFD;;AAIA,IAAMC,qBAAqB,GAAG,2BAAU,wBAAYC,gBAAZ,EAAuBP,QAAvB,EAAiCI,WAAjC,EAA8C,0BAAe,kBAAf,EAAmCzF,eAAnC,CAA9C,CAAV,EAA8G,EAA9G,EAAkH,IAAlH,EAAwH,OAAxH,CAA9B","sourcesContent":["import React from 'react';\nimport { Authorize } from '@client/components';\nimport { withRematch, initStore } from '@client/store';\nimport { withNamespaces } from '@client/i18n';\nimport './AdminStatisticsScreen.less';\nimport { NewsStatisticsResult } from '@client/services/service-proxies';\nimport { Row, Col, DatePicker, Button, Table, message } from 'antd';\nimport { getServiceProxy } from '@client/services';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { utils, writeFile } from 'xlsx';\nimport * as FileSaver from 'file-saver';\n\ninterface Props {\n  t: (key: string) => string;\n}\ninterface State {\n  loading: boolean;\n  data: NewsStatisticsResult;\n  showAll: {\n    brands: boolean;\n    categories: boolean;\n    provinces: boolean;\n  };\n}\nclass AdminStatistics extends React.Component<Props, State> {\n  state: State = {\n    loading: false,\n    data: {\n      daysOfWeek: [],\n      hoursOfDay: [],\n      brands: [],\n      categories: [],\n      provinces: [],\n    },\n    showAll: {\n      brands: false,\n      categories: false,\n      provinces: false,\n    },\n  };\n\n  showAll = (key: string) => {\n    this.setState({\n      showAll: {\n        ...this.state.showAll,\n        [key]: true,\n      },\n    });\n  }\n\n  getStatisticsInfo = async (dates: any[]) => {\n    if (dates.length === 2) {\n      try {\n        this.setState({\n          loading: true,\n        });\n\n        const startDate = new Date(dates[0]).toISOString();\n        const endDate = new Date(dates[1]).toISOString();\n        const idToken = await firebase.auth().currentUser!.getIdToken();\n        const serviceProxy = getServiceProxy(idToken);\n        const statisticsData = await serviceProxy.findNewsStatisticsInfo(startDate, endDate);\n\n        this.setState({\n          loading: false,\n          data: {\n            daysOfWeek: statisticsData.daysOfWeek,\n            hoursOfDay: statisticsData.hoursOfDay,\n            brands: statisticsData.brands,\n            categories: statisticsData.categories,\n            provinces: statisticsData.provinces,\n          },\n        });\n      } catch (error) {\n        message.error(error.message);\n        this.setState({\n          loading: false,\n        });\n      }\n    }\n  }\n\n  exportExcel = () => {\n    try {\n      const tables = document.getElementsByTagName('table');\n      const workSheets = Array.from(tables).map((item) => utils.table_to_sheet(item));\n      const jsonData = workSheets.map((item) => utils.sheet_to_json(item, { header: 1 }));\n      let result: any = [];\n      result.concat(jsonData[0]);\n      jsonData.forEach((item) => {\n        result = result.concat(item).concat(['']);\n      });\n      const worksheet = utils.json_to_sheet(result, { skipHeader: true });\n      const workbook = utils.book_new();\n      utils.book_append_sheet(workbook, worksheet, 'timmay.vn');\n      const file = writeFile(workbook, 'statistic-timmay.xlsx');\n      FileSaver.saveAs(file, 'statistic-timmay.xlsx');\n    } catch (error) {\n      //\n    }\n  }\n\n  render () {\n    const translate = this.props.t;\n\n    const dateFormat = 'DD/MM/YYYY';\n\n    const daysOfWeekData = {};\n    this.state.data.daysOfWeek.forEach((item) => {\n      daysOfWeekData[item._id] = item.totalNews ? item.totalNews : 0;\n    });\n\n    const daysOfWeekColumns: any = [\n      {\n        title: translate('admin-statistics:day'),\n        dataIndex: 'totalNews',\n        key: 'totalNews',\n        render: () => translate('admin-statistics:totalNews'),\n      },\n      {\n        title: translate('admin-statistics:monday'),\n        dataIndex: '2',\n        key: '2',\n        render: (_text: string, record: any) => record['2'] ? record['2'] : 0,\n      },\n      {\n        title: translate('admin-statistics:tuesday'),\n        dataIndex: '3',\n        key: '3',\n        render: (_text: string, record: any) => record['3'] ? record['3'] : 0,\n      },\n      {\n        title: translate('admin-statistics:wednesday'),\n        dataIndex: '4',\n        key: '4',\n        render: (_text: string, record: any) => record['4'] ? record['4'] : 0,\n      },\n      {\n        title: translate('admin-statistics:thursday'),\n        dataIndex: '5',\n        key: '5',\n        render: (_text: string, record: any) => record['5'] ? record['5'] : 0,\n      },\n      {\n        title: translate('admin-statistics:friday'),\n        dataIndex: '6',\n        key: '6',\n        render: (_text: string, record: any) => record['6'] ? record['6'] : 0,\n      },\n      {\n        title: translate('admin-statistics:saturday'),\n        dataIndex: '7',\n        key: '7',\n        render: (_text: string, record: any) => record['7'] ? record['7'] : 0,\n      },\n      {\n        title: translate('admin-statistics:sunday'),\n        dataIndex: '1',\n        key: '1',\n        render: (_text: string, record: any) => record['1'] ? record['1'] : 0,\n      },\n    ];\n\n    const hoursOfDayColumns = [\n      {\n        title: translate('admin-statistics:hour'),\n        dataIndex: 'totalNews',\n        key: 'totalNews',\n        render: () => translate('admin-statistics:totalNews'),\n      },\n      {\n        title: `0 - 2`,\n        dataIndex: '0',\n        key: '0',\n        render: (_text: string, record: any) => record['0'] ? record['0'] : 0,\n      },\n      {\n        title: `2 - 4`,\n        dataIndex: '2',\n        key: '2',\n        render: (_text: string, record: any) => record['2'] ? record['2'] : 0,\n      },\n      {\n        title: `4 - 6`,\n        dataIndex: '4',\n        key: '4',\n        render: (_text: string, record: any) => record['4'] ? record['4'] : 0,\n      },\n      {\n        title: `6 - 8`,\n        dataIndex: '6',\n        key: '6',\n        render: (_text: string, record: any) => record['6'] ? record['6'] : 0,\n      },\n      {\n        title: `8 - 10`,\n        dataIndex: '8',\n        key: '8',\n        render: (_text: string, record: any) => record['8'] ? record['8'] : 0,\n      },\n      {\n        title: `10 - 12`,\n        dataIndex: '10',\n        key: '10',\n        render: (_text: string, record: any) => record['10'] ? record['10'] : 0,\n      },\n      {\n        title: `12 - 14`,\n        dataIndex: '12',\n        key: '12',\n        render: (_text: string, record: any) => record['12'] ? record['12'] : 0,\n      },\n      {\n        title: `14 - 16`,\n        dataIndex: '14',\n        key: '14',\n        render: (_text: string, record: any) => record['14'] ? record['14'] : 0,\n      },\n      {\n        title: `16 - 18`,\n        dataIndex: '16',\n        key: '16',\n        render: (_text: string, record: any) => record['16'] ? record['16'] : 0,\n      },\n      {\n        title: `18 - 20`,\n        dataIndex: '18',\n        key: '18',\n        render: (_text: string, record: any) => record['18'] ? record['18'] : 0,\n      },\n      {\n        title: `20 - 22`,\n        dataIndex: '20',\n        key: '20',\n        render: (_text: string, record: any) => record['20'] ? record['20'] : 0,\n      },\n      {\n        title: `22 - 24`,\n        dataIndex: '22',\n        key: '22',\n        render: (_text: string, record: any) => record['22'] ? record['22'] : 0,\n      },\n    ];\n\n    const hoursOfDayData = {};\n    this.state.data.hoursOfDay.forEach((hour) => {\n      if (Number(hour._id) % 2 === 0) {\n        hoursOfDayData[Number(hour._id)] = Number(hour.totalNews);\n      } else {\n        hoursOfDayData[Number(hour._id) - 1] ? hoursOfDayData[Number(hour._id) - 1] += Number(hour.totalNews) : hoursOfDayData[Number(hour._id) - 1] = Number(hour.totalNews);\n      }\n    });\n\n    const brandsColumns = [\n      {\n        title: translate('admin-statistics:brand'),\n        dataIndex: 'name',\n        key: 'name',\n        sorter: (a: any, b: any) => a.name - b.name,\n      },\n      {\n        title: translate('admin-statistics:totalNews'),\n        dataIndex: 'totalNews',\n        key: 'totalNews',\n        sorter: (a: any, b: any) => a.totalNews - b.totalNews,\n      },\n    ];\n\n    const categoriesColumns = [\n      {\n        title: translate('admin-statistics:category'),\n        dataIndex: 'name',\n        key: 'name',\n        sorter: (a: any, b: any) => a.name - b.name,\n      },\n      {\n        title: translate('admin-statistics:totalNews'),\n        dataIndex: 'totalNews',\n        key: 'totalNews',\n        sorter: (a: any, b: any) => a.totalNews - b.totalNews,\n      },\n    ];\n\n    const locationsColumns = [\n      {\n        title: translate('admin-statistics:location'),\n        dataIndex: 'name',\n        key: 'name',\n        sorter: (a: any, b: any) => a.name - b.name,\n      },\n      {\n        title: translate('admin-statistics:totalNews'),\n        dataIndex: 'totalNews',\n        key: 'totalNews',\n        sorter: (a: any, b: any) => a.totalNews - b.totalNews,\n      },\n    ];\n\n    return (\n      <div className='admin-statistics-screen'>\n        <Row style={{marginBottom: '24px'}}>\n          <Col xs={24}>\n            <div className='date-picker-container'>\n              <DatePicker.RangePicker\n                placeholder={[translate('admin-statistics:startDate'), translate('admin-statistics:endDate')]}\n                format={dateFormat}\n                onCalendarChange={(dates: any) => this.getStatisticsInfo(dates)}\n              />\n              <Button htmlType='submit' type='primary' icon='download' onClick={this.exportExcel}>\n                {translate('admin-statistics:exportToExcel')}\n              </Button>\n            </div>\n          </Col>\n        </Row>\n\n        <Table\n          bordered={true}\n          columns={daysOfWeekColumns}\n          dataSource={this.state.data.daysOfWeek.length > 0 ? [daysOfWeekData] : []}\n          pagination={false}\n          scroll={{x: 1000}}\n          style={{marginBottom: '24px'}}\n          rowKey={(record: any) => record._id}\n          loading={this.state.loading}\n        />\n\n        <Table\n          bordered={true}\n          columns={hoursOfDayColumns}\n          dataSource={this.state.data.hoursOfDay.length > 0 ? [hoursOfDayData] : []}\n          pagination={false}\n          scroll={{x: 1000}}\n          style={{marginBottom: '24px'}}\n          rowKey={(record: any) => record._id}\n          loading={this.state.loading}\n        />\n\n        <Row type='flex' gutter={24}>\n          <Col xs={24} lg={8}>\n            <Table\n              bordered={true}\n              columns={brandsColumns}\n              dataSource={this.state.showAll.brands ? this.state.data.brands.sort((a, b) => b.totalNews - a.totalNews) : this.state.data.brands.sort((a, b) => b.totalNews - a.totalNews).slice(0, 15)}\n              pagination={false}\n              style={{marginBottom: '24px'}}\n              rowKey={(record: any) => record._id}\n              loading={this.state.loading}\n              footer={() => this.state.data.brands.length > 15 && !this.state.showAll.brands ? <a onClick={() => this.showAll('brands')}>{translate('admin-statistics:showAll')}</a> : null}\n            />\n          </Col>\n          <Col xs={24} lg={8}>\n            <Table\n              bordered={true}\n              columns={categoriesColumns}\n              dataSource={this.state.showAll.categories ? this.state.data.categories.sort((a, b) => b.totalNews - a.totalNews) : this.state.data.categories.sort((a, b) => b.totalNews - a.totalNews).slice(0, 15)}\n              pagination={false}\n              style={{marginBottom: '24px'}}\n              rowKey={(record: any) => record._id}\n              loading={this.state.loading}\n              footer={() => this.state.data.categories.length > 15 && !this.state.showAll.categories ? <a onClick={() => this.showAll('categories')}>{translate('admin-statistics:showAll')}</a> : null}\n            />\n          </Col>\n          <Col xs={24} lg={8}>\n            <Table\n              bordered={true}\n              columns={locationsColumns}\n              dataSource={this.state.showAll.provinces ? this.state.data.provinces.sort((a, b) => b.totalNews - a.totalNews) : this.state.data.provinces.sort((a, b) => b.totalNews - a.totalNews).slice(0, 15)}\n              pagination={false}\n              style={{marginBottom: '24px'}}\n              rowKey={(record: any) => record._id}\n              loading={this.state.loading}\n              footer={() => this.state.data.provinces.length > 15 && !this.state.showAll.provinces ? <a onClick={() => this.showAll('provinces')}>{translate('admin-statistics:showAll')}</a> : null}\n            />\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n  };\n};\n\nconst mapDispatch = (_rootReducer: any) => {\n  return {};\n};\n\nconst AdminStatisticsScreen = Authorize(withRematch(initStore, mapState, mapDispatch)(withNamespaces('admin-statistics')(AdminStatistics)), [], true, 'admin');\n\nexport {\n  AdminStatisticsScreen,\n};\n"],"file":"AdminStatisticsScreen.js"}