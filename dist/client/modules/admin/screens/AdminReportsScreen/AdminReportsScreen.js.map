{"version":3,"sources":["../../../../../../src/client/modules/admin/screens/AdminReportsScreen/AdminReportsScreen.tsx"],"names":["AdminReports","filters","search","undefined","reason","state","data","before","after","first","sortBy","loading","table","value","setState","firebase","auth","currentUser","getIdToken","idToken","serviceProxies","findReports","result","error","message","jsCookie","get","payload","updateReport","reportId","operation","resolvedResult","map","item","_id","resolvedAt","Date","getTime","resolvedBy","props","profileState","authUser","id","success","t","getData","translate","dateFormat","actionsDropdown","record","resolveReport","reportResults","SKIP","DELETE","columns","title","dataIndex","key","render","_text","news","shop","domain","reports","slice","report","index","reportReasons","filter","label","moment","format","handleSearchChange","x","marginBottom","getNextPage","getPrevPage","React","Component","mapState","rootState","profileModel","mapDispatch","_rootReducer","AdminReportsScreen","initStore"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { AdminSearchbar, PagingButtons, Authorize } from '@client/components';\nimport './AdminReportsScreen.less';\nimport { withNamespaces } from '@client/i18n';\nimport { Table, message, Tag, Menu, Dropdown, Icon } from 'antd';\nimport { Report, ReportState } from '@client/services/service-proxies';\nimport * as jsCookie from 'js-cookie';\nimport { getServiceProxy } from '@client/services';\nimport { getShopUrl, reportReasons, reportResults } from '@client/core';\nimport * as moment from 'moment';\nimport { withRematch, initStore, ProfileState } from '@client/store';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\n\ninterface Props {}\ninterface State {\n  filters: {\n    search?: string;\n    reason?: string;\n    state?: ReportState;\n  };\n  data: Report[];\n  before?: string;\n  after?: string;\n  first: number;\n  sortBy: string;\n  loading: {\n    table: boolean;\n  };\n}\nclass AdminReports extends React.Component<Props & {profileState: ProfileState; t: (key: string) => string}, State> {\n  state: State = {\n    filters: {\n      search: undefined,\n      reason: undefined,\n      state: undefined,\n    },\n    data: [],\n    before: undefined,\n    after: undefined,\n    first: 10,\n    sortBy: `createdAt|desc`,\n    loading: {\n      table: true,\n    },\n  };\n\n  componentDidMount () {\n    this.getData();\n  }\n\n  handleSearchChange = (value: string) => {\n    this.setState({\n      filters: {\n        ...this.state.filters,\n        search: value,\n      },\n    });\n  }\n\n  getData = async () => {\n    this.setState({\n      loading: {\n        ...this.state.loading,\n        table: true,\n      },\n    });\n\n    try {\n      const idToken: any = await firebase.auth().currentUser!.getIdToken;\n      const serviceProxies = getServiceProxy(idToken);\n      const result = await serviceProxies.findReports(\n        this.state.filters.search,\n        this.state.filters.state as any,\n        this.state.filters.reason as any,\n        this.state.first,\n        this.state.sortBy,\n        undefined,\n        undefined,\n      );\n\n      this.setState({\n        data: result.data,\n        before: result.before,\n        after: result.after,\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    } catch (error) {\n      message.error(error.message);\n      this.setState({\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    }\n  }\n\n  getNextPage = async () => {\n    this.setState({\n      loading: {\n        ...this.state.loading,\n        table: true,\n      },\n    });\n\n    try {\n      const idToken: any = await firebase.auth().currentUser!.getIdToken;\n      const serviceProxies = getServiceProxy(idToken);\n      const result = await serviceProxies.findReports(\n        this.state.filters.search,\n        this.state.filters.state as any,\n        this.state.filters.reason as any,\n        this.state.first,\n        this.state.sortBy,\n        undefined,\n        this.state.after,\n      );\n\n      this.setState({\n        data: result.data,\n        before: result.before,\n        after: result.after,\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    } catch (error) {\n      message.error(error.message);\n      this.setState({\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    }\n  }\n\n  getPrevPage = async () => {\n    this.setState({\n      loading: {\n        ...this.state.loading,\n        table: true,\n      },\n    });\n\n    try {\n      const idToken = jsCookie.get('token');\n      const serviceProxies = getServiceProxy(idToken);\n      const result = await serviceProxies.findReports(\n        this.state.filters.search,\n        this.state.filters.state as any,\n        this.state.filters.reason as any,\n        this.state.first,\n        this.state.sortBy,\n        this.state.before,\n        undefined,\n      );\n\n      this.setState({\n        data: result.data,\n        before: result.before,\n        after: result.after,\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    } catch (error) {\n      message.error(error.message);\n      this.setState({\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n    }\n  }\n\n  resolveReport = async (payload: {reportId: string; resolvedResult: string}) => {\n    this.setState({\n      loading: {\n        ...this.state.loading,\n        table: true,\n      },\n    });\n\n    try {\n      const idToken = jsCookie.get('token');\n      const serviceProxies = getServiceProxy(idToken);\n      await serviceProxies.updateReport(\n        payload.reportId,\n        {\n          operation: 'resolveReport',\n          payload: {\n            resolvedResult: payload.resolvedResult,\n          },\n        },\n      );\n\n      this.setState({\n        data: this.state.data.map((item) => {\n          if (item._id === payload.reportId) {\n            return {\n              ...item,\n              state: 'RESOLVED',\n              resolvedResult: payload.resolvedResult,\n              resolvedAt: new Date().getTime(),\n              resolvedBy: this.props.profileState.authUser!.id,\n            } as any;\n          } else {\n            return item;\n          }\n        }),\n        loading: {\n          ...this.state.loading,\n          table: false,\n        },\n      });\n      message.success(this.props.t('admin-reports:resolve-report-success'));\n    } catch (error) {\n      message.error(error.message);\n    }\n  }\n\n  render() {\n    const translate = this.props.t;\n    const dateFormat = 'DD/MM/YYYY HH:mm';\n    const actionsDropdown = (record: Report) => (\n      <Menu>\n        <Menu.Item>\n          <a onClick={() => this.resolveReport({reportId: record._id, resolvedResult: reportResults.SKIP})}>\n            {translate('admin-reports:skip')}\n          </a>\n        </Menu.Item>\n        <Menu.Item>\n          <a onClick={() => this.resolveReport({reportId: record._id, resolvedResult: reportResults.DELETE})}>\n            {translate('admin-reports:delete')}\n          </a>\n        </Menu.Item>\n      </Menu>\n    );\n    const columns: any[] = [\n      {\n        title: translate('admin-reports:news-title'),\n        dataIndex: 'newsTitle',\n        key: 'newsTitle',\n        render: (_text: string, record: Report) => (\n          <a href={record.news.shop ? `${getShopUrl(record.news.shop.domain)}/bai-dang-cua-hang/${record.news._id}` : `/bai-dang/${record.news._id}`} target='_blank'>{record.news.title}</a>\n        ),\n      },\n      {\n        title: translate('admin-reports:report-reasons'),\n        dataIndex: 'reportReasons',\n        key: 'reportReasons',\n        render: (_text: string, record: Report) => (\n          record.reports.slice(0, 2).map((report, index) => <Tag key={index} color='red'>{reportReasons.filter((item) => item.value === report.reason)[0].label}</Tag>)\n        ),\n      },\n      {\n        title: translate('admin-reports:report-state'),\n        dataIndex: 'reportState',\n        key: 'reportState',\n        render: (_text: string, record: Report) => (\n          <Tag color={record.state === 'PENDING' ? 'red' : 'blue'}>{record.state === 'PENDING' ? translate('admin-reports:pending-report') : translate('admin-reports:resolved-report')}</Tag>\n        ),\n      },\n      {\n        title: translate('admin-reports:resolved-result'),\n        dataIndex: 'resolvedResult',\n        key: 'resolvedResult',\n        render: (_text: string, record: Report) => record.resolvedResult ? (\n          <Tag color={record.resolvedResult === 'DELETE' ? 'red' : 'blue'}>\n            {record.resolvedResult === 'DELETE' ? translate('admin-reports:pending-report') : translate('admin-reports:resolved-report')}\n          </Tag>\n        ) : '',\n      },\n      {\n        title: translate('admin-reports:resolved-at'),\n        dataIndex: 'resolvedAt',\n        key: 'resolvedAt',\n        render: (_text: string, record: Report) => record.resolvedAt ? moment(new Date(record.resolvedAt)).format(dateFormat) : '',\n      },\n      {\n        title: translate('common:actions'),\n        dataIndex: 'operations',\n        key: 'operations',\n        render: (_text: string, record: Report) => (\n          <Dropdown overlay={actionsDropdown(record)} trigger={['click']}>\n            <a className='ant-dropdown-link'>\n              {translate('common:actions')} <Icon type='down' />\n            </a>\n          </Dropdown>\n        ),\n      },\n    ];\n\n    return (\n      <div className='admin-reports-screen'>\n        <AdminSearchbar\n          handleSearch={this.getData}\n          value={this.state.filters.search}\n          showSearch={true}\n          handleSearchChange={this.handleSearchChange}\n          placeholder={translate('admin-reports:search-reports')}\n        />\n\n        <Table\n          columns={columns}\n          dataSource={this.state.data}\n          loading={this.state.loading.table}\n          pagination={false}\n          scroll={{x: 1000}}\n          style={{marginBottom: '24px'}}\n          rowKey={(record: any) => record._id}\n        />\n\n        <PagingButtons\n          before={this.state.before}\n          after={this.state.after}\n          getNextPage={this.getNextPage}\n          getPrevPage={this.getPrevPage}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n  };\n};\n\nconst mapDispatch = (_rootReducer: any) => {\n  return {};\n};\n\nconst AdminReportsScreen = Authorize(withRematch(initStore, mapState, mapDispatch)(withNamespaces('admin-reports')(AdminReports)), [], true, 'admin');\n\nexport {\n  AdminReportsScreen,\n};\n"],"file":"AdminReportsScreen.js"}