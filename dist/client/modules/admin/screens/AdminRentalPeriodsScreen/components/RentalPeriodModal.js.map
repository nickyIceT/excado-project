{"version":3,"sources":["../../../../../../../src/client/modules/admin/screens/AdminRentalPeriodsScreen/components/RentalPeriodModal.tsx"],"names":["RentalPeriodModal","props","translate","t","RentalPeriodValidateSchema","yup","object","shape","min","number","required","max","initialValues","rentalPeriodInfo","_id","undefined","values","formikBag","handleOk","resetForm","context","visible","handleSubmit","handleCancel","loading","display","alignItems","errors","value","setFieldValue","fieldName","validateSchema"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AAEA;;AACA;;;;;;;;;;AAUA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,KAAD,EAAkB;AAC1C,MAAMC,SAAS,GAAGD,KAAK,CAACE,CAAxB;AAEA,MAAMC,0BAA0B,GAAGC,GAAG,CAACC,MAAJ,GAAaC,KAAb,CAAmB;AACpDC,IAAAA,GAAG,EAAEH,GAAG,CAACI,MAAJ,GACFC,QADE,CACOR,SAAS,CAAC,iDAAD,CADhB,EACqEM,GADrE,CACyE,CADzE,EAC4E,4CAD5E,CAD+C;AAGpDG,IAAAA,GAAG,EAAEN,GAAG,CAACI,MAAJ;AAH+C,GAAnB,CAAnC;AAMA,MAAMG,aAAa,GAAGX,KAAK,CAACY,gBAAN,IAA0BZ,KAAK,CAACY,gBAAN,CAAuBC,GAAjD,GAAuD;AAC3EN,IAAAA,GAAG,EAAEP,KAAK,CAACY,gBAAN,CAAuBL,GAD+C;AAE3EG,IAAAA,GAAG,EAAEV,KAAK,CAACY,gBAAN,CAAuBF;AAF+C,GAAvD,GAGlB;AACFH,IAAAA,GAAG,EAAE,CADH;AAEFG,IAAAA,GAAG,EAAEI;AAFH,GAHJ;AAQA,SACE,6BAAC,cAAD;AACE,IAAA,aAAa,EAAEH,aADjB;AAEE,IAAA,gBAAgB,EAAE,KAFpB;AAGE,IAAA,gBAAgB,EAAER,0BAHpB;AAIE,IAAA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAE,iBAAOY,MAAP,EAAeC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACFhB,KAAK,CAACiB,QAAN,CAAeF,MAAf,CADE;;AAAA;AAERC,gBAAAA,SAAS,CAACE,SAAV,CAAoB;AAClBX,kBAAAA,GAAG,EAAE,CADa;AAElBG,kBAAAA,GAAG,EAAEI;AAFa,iBAApB;;AAFQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;AAAA;AAJV,KAYG,UAACK,OAAD;AAAA,WACC;AACE,MAAA,KAAK,EAAEnB,KAAK,CAACY,gBAAN,IAA0BZ,KAAK,CAACY,gBAAN,CAAuBC,GAAjD,aAA0DZ,SAAS,CAAC,yCAAD,CAAnE,cAAsHA,SAAS,CAAC,2CAAD,CAA/H,CADT;AAEE,MAAA,OAAO,EAAED,KAAK,CAACoB,OAFjB;AAGE,MAAA,IAAI,EAAED,OAAO,CAACE,YAHhB;AAIE,MAAA,QAAQ,EAAErB,KAAK,CAACsB,YAJlB;AAKE,MAAA,MAAM,EAAErB,SAAS,CAAC,aAAD,CALnB;AAME,MAAA,UAAU,EAAEA,SAAS,CAAC,eAAD,CANvB;AAOE,MAAA,cAAc,EAAED,KAAK,CAACuB,OAPxB;AAQE,MAAA,SAAS,EAAC;AARZ,OAUE;AAAM,MAAA,MAAM,EAAC,QAAb;AAAsB,MAAA,QAAQ,EAAEJ,OAAO,CAACE,YAAxC;AAAsD,MAAA,KAAK,EAAE;AAACG,QAAAA,OAAO,EAAE,MAAV;AAAkBC,QAAAA,UAAU,EAAE;AAA9B;AAA7D,OACGxB,SAAS,CAAC,aAAD,CADZ,WAEE,2CAAM,IAAN;AACE,MAAA,cAAc,EAAEkB,OAAO,CAACO,MAAR,CAAenB,GAAf,GAAqB,OAArB,GAA+BO;AADjD,OAGE;AACE,MAAA,KAAK,EAAEK,OAAO,CAACJ,MAAR,CAAeR,GADxB;AAEE,MAAA,QAAQ,EAAE,kBAACoB,KAAD;AAAA,eAA6BR,OAAO,CAACS,aAAR,CAAsB,KAAtB,EAA6BD,KAAK,GAAGA,KAAH,GAAW,CAA7C,CAA7B;AAAA,OAFZ;AAGE,MAAA,WAAW,EAAE1B,SAAS,CAAC,wCAAD,CAHxB;AAIE,MAAA,IAAI,EAAC,KAJP;AAKE,MAAA,GAAG,EAAE,CALP;AAME,MAAA,MAAM,EAAE;AAAA,eAAM,yBAAc;AAC1B4B,UAAAA,SAAS,EAAE,KADe;AAE1BC,UAAAA,cAAc,EAAE3B,0BAFU;AAG1BgB,UAAAA,OAAO,EAAPA;AAH0B,SAAd,CAAN;AAAA;AANV,MAHF,CAFF,EAkBGlB,SAAS,CAAC,WAAD,CAlBZ,gBAmBE,2CAAM,IAAN;AACE,MAAA,cAAc,EAAEkB,OAAO,CAACO,MAAR,CAAehB,GAAf,GAAqB,OAArB,GAA+BI;AADjD,OAGE;AACE,MAAA,KAAK,EAAEK,OAAO,CAACJ,MAAR,CAAeL,GADxB;AAEE,MAAA,QAAQ,EAAE,kBAACiB,KAAD;AAAA,eAA6BR,OAAO,CAACS,aAAR,CAAsB,KAAtB,EAA6BD,KAAK,GAAGA,KAAH,GAAW,CAA7C,CAA7B;AAAA,OAFZ;AAGE,MAAA,WAAW,EAAE1B,SAAS,CAAC,wCAAD,CAHxB;AAIE,MAAA,IAAI,EAAC,KAJP;AAKE,MAAA,MAAM,EAAE;AAAA,eAAM,yBAAc;AAC1B4B,UAAAA,SAAS,EAAE,KADe;AAE1BC,UAAAA,cAAc,EAAE3B,0BAFU;AAG1BgB,UAAAA,OAAO,EAAPA;AAH0B,SAAd,CAAN;AAAA;AALV,MAHF,CAnBF,EAkCGlB,SAAS,CAAC,cAAD,CAlCZ,CAVF,EA8CE;AAAK,MAAA,SAAS,EAAC;AAAf,OACGkB,OAAO,CAACO,MAAR,CAAenB,GAAf,IAAsBY,OAAO,CAACO,MAAR,CAAehB,GADxC,CA9CF,CADD;AAAA,GAZH,CADF;AAmED,CApFD;;eAsFe,0BAAe,sBAAf,EAAuCX,iBAAvC,C","sourcesContent":["import React from 'react';\nimport './RentalPeriodModal.less';\nimport { RentalPeriod } from '@client/services/service-proxies';\nimport * as yup from 'yup';\nimport { Formik, FormikContext } from 'formik';\nimport { Modal, Form, InputNumber } from 'antd';\nimport { validateField } from '@client/core';\nimport { withNamespaces } from '@client/i18n';\n\ninterface Props {\n  rentalPeriodInfo?: RentalPeriod;\n  loading: boolean;\n  visible: boolean;\n  handleCancel: () => void;\n  handleOk: (values: {[key: string]: any}) => void;\n  t: (key: string) => string;\n}\nconst RentalPeriodModal = (props: Props) => {\n  const translate = props.t;\n\n  const RentalPeriodValidateSchema = yup.object().shape({\n    min: yup.number()\n      .required(translate('admin-rental-periods:pleaseInputMinRentalPeriod')).min(1, 'admin-rental-periods:min-min-rental-period'),\n    max: yup.number(),\n  });\n\n  const initialValues = props.rentalPeriodInfo && props.rentalPeriodInfo._id ? {\n    min: props.rentalPeriodInfo.min,\n    max: props.rentalPeriodInfo.max,\n  } : {\n    min: 1,\n    max: undefined,\n  };\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      validateOnChange={false}\n      validationSchema={RentalPeriodValidateSchema}\n      onSubmit={async (values, formikBag) => {\n        await props.handleOk(values);\n        formikBag.resetForm({\n          min: 1,\n          max: undefined,\n        });\n      }}\n    >\n      {(context: FormikContext<any>) => (\n        <Modal\n          title={props.rentalPeriodInfo && props.rentalPeriodInfo._id ? `${translate('admin-rental-periods:edit-rental-period')}` : `${translate('admin-rental-periods:create-rental-period')}`}\n          visible={props.visible}\n          onOk={context.handleSubmit}\n          onCancel={props.handleCancel}\n          okText={translate('common:save')}\n          cancelText={translate('common:cancel')}\n          confirmLoading={props.loading}\n          className='rental-period-modal'\n        >\n          <Form layout='inline' onSubmit={context.handleSubmit} style={{display: 'flex', alignItems: 'center'}}>\n            {translate('common:from')} &nbsp;\n            <Form.Item\n              validateStatus={context.errors.min ? 'error' : undefined}\n            >\n              <InputNumber\n                value={context.values.min}\n                onChange={(value: number|undefined) => context.setFieldValue('min', value ? value : 0)}\n                placeholder={translate('admin-rental-periods:min-rental-period')}\n                name='min'\n                min={1}\n                onBlur={() => validateField({\n                  fieldName: 'min',\n                  validateSchema: RentalPeriodValidateSchema,\n                  context,\n                })}\n              />\n            </Form.Item>\n            {translate('common:to')} &nbsp; &nbsp;\n            <Form.Item\n              validateStatus={context.errors.max ? 'error' : undefined}\n            >\n              <InputNumber\n                value={context.values.max}\n                onChange={(value: number|undefined) => context.setFieldValue('max', value ? value : 0)}\n                placeholder={translate('admin-rental-periods:max-rental-period')}\n                name='max'\n                onBlur={() => validateField({\n                  fieldName: 'max',\n                  validateSchema: RentalPeriodValidateSchema,\n                  context,\n                })}\n              />\n            </Form.Item>\n            {translate('common:month')}\n          </Form>\n          <div className='help'>\n            {context.errors.min || context.errors.max}\n          </div>\n        </Modal>\n      )}\n    </Formik>\n  );\n};\n\nexport default withNamespaces('admin-rental-periods')(RentalPeriodModal);\n"],"file":"RentalPeriodModal.js"}