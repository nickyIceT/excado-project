{"version":3,"sources":["../../../../src/client/components/CommonLayout/NotificationDropdown.tsx"],"names":["NotificationDropdown","props","getNotificationContent","notification","type","isShop","news","shop","_id","displayName","name","title","readNotification","window","location","href","domain","owner","fullName","email","phoneNo","loadingNotification","notificationList","length","item","state","background","cursor","fontSize","moment","createdAt","format","hasNext","loadMoreNotifications","readAllNotifications","height","textAlign","marginTop","fontWeight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { List, Icon, Spin } from 'antd';\nimport { Notification } from '../../services/service-proxies';\nimport { getShopUrl } from '../../core';\nimport * as moment from 'moment';\nimport './NotificationDropdown.less';\nimport 'firebase/auth';\n\ninterface Props {\n  loadingNotification: boolean;\n  hasNext: boolean;\n  notificationList: Notification[];\n  loadMoreNotifications: () => void;\n  readAllNotifications: () => void;\n  readNotification: (notificationId: string) => void;\n}\nexport const NotificationDropdown = (props: Props) => {\n  const getNotificationContent = (notification: Notification) => {\n    if (notification.type === 'CREATE_NEWS') {\n      const isShop = notification.news.shop && notification.news.shop._id;\n      if (isShop) {\n        const displayName = notification.news.shop.name;\n        return (\n          <p>\n            Bài viết &nbsp;\n            <a title={notification.news.title} onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `${getShopUrl(notification.news.shop.domain)}/bai-dang-cua-hang/${notification.news._id}`;\n            }}>\n              <b>{notification.news.title}</b>\n            </a> &nbsp;\n            đã được đăng thành công trong cửa hàng &nbsp;\n            <a title={displayName} onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `${getShopUrl(notification.news.shop.domain)}/thong-tin-cua-hang`;\n            }}>\n              <b>{displayName}</b>\n            </a>\n          </p>\n        );\n      } else {\n        return (\n          <p>\n            Bài viết &nbsp;\n            <a title={notification.news.title} onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `/bai-dang/${notification.news._id}`;\n            }}>\n              <b>{notification.news.title}</b>\n            </a> &nbsp;\n            đã được đăng thành công\n          </p>\n        );\n      }\n    } else if (notification.type === 'FOLLOW_USER') {\n      const displayName = notification.news.owner.fullName || notification.news.owner.email || notification.news.owner.phoneNo;\n      return (\n        <p>\n          Người dùng &nbsp;\n          <a title={displayName}\n            onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `/nguoi-dung/${notification.news.owner._id}`;\n            }}\n          >\n            <b>{displayName}</b>\n          </a> &nbsp;\n          vừa đăng bài viết &nbsp;\n          <a title={notification.news.title}\n            onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `/bai-dang/${notification.news._id}`;\n            }}\n          >\n            <b>{notification.news.title}</b>\n          </a>\n        </p>\n      );\n    } else if (notification.type === 'FOLLOW_SHOP') {\n      const displayName = notification.news.shop.name;\n      return (\n        <p>\n          Cửa hàng &nbsp;\n          <a title={displayName}\n            onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `${getShopUrl(notification.news.shop.domain)}/thong-tin-cua-hang`;\n            }}\n          >\n            <b>{displayName}</b>\n          </a> &nbsp;\n          vừa đăng bài viết &nbsp;\n          <a title={notification.news.title}\n            onClick={() => {\n              props.readNotification(notification._id);\n              window.location.href = `${getShopUrl(notification.news.shop.domain)}/bai-dang-cua-hang/${notification.news._id}`;\n            }}\n          >\n            <b>{notification.news.title}</b>\n          </a>\n        </p>\n      );\n    }\n    return ;\n  };\n\n  return (\n    <div className='notification-dropdown'>\n      <Spin spinning={props.loadingNotification}>\n        {props.notificationList.length > 0 ? (\n          <div>\n            <List\n              className='notification-list'\n              itemLayout='horizontal'\n              dataSource={props.notificationList}\n              renderItem={(item: Notification) => (\n                <List.Item\n                  onClick={async () => props.readNotification(item._id)}\n                  style={item.state === 'UNREAD' ? {background: '#e6f7ff', cursor: 'pointer'} : {}}\n                >\n                  <List.Item.Meta\n                    title={getNotificationContent(item)}\n                    description={<span style={{fontSize: '12px'}}><Icon type='clock-circle' /> {moment(item.createdAt).format('DD-MM-YYYY HH:mm')}</span>}\n                  />\n                </List.Item>\n              )}\n            >\n              {props.hasNext && (\n                <List.Item className='loadmore-containter'>\n                  <a className='loadmore-button' onClick={props.loadMoreNotifications} type='primary'>Xem thêm</a>\n                </List.Item>\n              )}\n            </List>\n            <div className='small-text'>\n              <a onClick={props.readAllNotifications}>Đánh dấu đã đọc tất cả</a>\n            </div>\n          </div>\n        ) : (\n          <div style={{height: '60px', textAlign: 'center', marginTop: '40px', fontWeight: 500}}>\n            {props.loadingNotification ? '' : 'Bạn không có thông báo nào'}\n          </div>\n        )}\n      </Spin>\n    </div>\n  );\n};\n"],"file":"NotificationDropdown.js"}