{"version":3,"sources":["../../../src/client/pages/index.tsx"],"names":["Index","props","topBrands","followState","followReducers","searchState","searchReducers","profileState","profileReducers","filters","keyword","resultSearchNewestPost","profileData","context","pageSizeOfNewestPost","req","idToken","jsCookie","get","cookies","token","serviceProxy","promises","searchElasticsearch","undefined","findTopBrands","push","findProfile","Promise","all","store","dispatch","searchModel","getDataInTabsSuccess","result","newsType","namespacesRequired","data","React","Component","mapState","rootState","profileModel","followModel","mapDispatch","rootReducer","initStore"],"mappings":"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","sourcesContent":["import React from 'react';\nimport HomePageScreen from '../modules/machine-news/screens/HomePageScreen/HomePageScreen';\nimport { ProfileState, ProfileEffects, ProfileReducers, FollowState, FollowReducers, FollowEffects, SearchState, SearchReducers, SearchEffects, withRematch, initStore } from '../store';\nimport { Brand, ElasticSearchResult, User } from '../services/service-proxies';\nimport { getServiceProxy } from '../services';\nimport { withNamespaces } from '../i18n';\nimport { isMobile } from '../core/checkIsMobile';\nimport * as jsCookie from 'js-cookie';\n\ninterface Props {\n  topBrands: Brand[];\n  profileState: ProfileState;\n  profileData: User;\n  profileReducers: ProfileReducers & ProfileEffects;\n  resultSearchNewestPost: ElasticSearchResult;\n  resultSuggestForToday: ElasticSearchResult;\n  followState: FollowState;\n  followReducers: FollowReducers & FollowEffects;\n  searchState: SearchState;\n  searchReducers: SearchReducers & SearchEffects;\n}\ninterface State { }\nclass Index extends React.Component<Props, State> {\n  static async getInitialProps(context: any) {\n    const pageSizeOfNewestPost = isMobile(context.req) ? 4 : 8;\n    let serviceProxy: any;\n    const idToken = !context.req ? jsCookie.get('token') : (context.req as any).cookies.token;\n    serviceProxy = getServiceProxy(idToken);\n\n    const promises = [\n      serviceProxy.searchElasticsearch(\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        'SELL',\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        pageSizeOfNewestPost,\n        'elasticsearchCreatedAt|desc',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.findTopBrands(),\n    ];\n    if (idToken) {\n      promises.push(serviceProxy.findProfile());\n    }\n    const [resultSearchNewestPost, topBrands, profileData] = await Promise.all(promises);\n\n    (context as any).store.dispatch.searchModel.getDataInTabsSuccess({ result: resultSearchNewestPost, newsType: 'SELL' });\n    return {\n      namespacesRequired: ['common', 'index'],\n      resultSearchNewestPost,\n      topBrands: topBrands.data,\n      profileData: profileData ? profileData : {},\n    };\n  }\n\n  render() {\n    return (\n      <HomePageScreen\n        topBrands={this.props.topBrands}\n        followState={this.props.followState}\n        followReducers={this.props.followReducers}\n        searchState={this.props.searchState}\n        searchReducers={this.props.searchReducers}\n        profileState={this.props.profileState}\n        profileReducers={this.props.profileReducers}\n        searchKeyword={this.props.searchState.filters.keyword}\n        resultSearchNewestPost={this.props.resultSearchNewestPost}\n        profileData={this.props.profileData}\n      />\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n    searchState: rootState.searchModel,\n    followState: rootState.followModel,\n  };\n};\n\nconst mapDispatch = (rootReducer: any) => {\n  return {\n    profileReducers: rootReducer.profileModel,\n    searchReducers: rootReducer.searchModel,\n    followReducers: rootReducer.followModel,\n  };\n};\nexport default withRematch(initStore, mapState, mapDispatch)(withNamespaces('index')(Index));\n"],"file":"index.js"}