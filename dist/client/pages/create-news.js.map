{"version":3,"sources":["../../../src/client/pages/create-news.tsx"],"names":["CreateNews","props","updateFilters","searchKeyword","profileState","profileReducers","addNewModel","context","authUser","store","getState","profileModel","id","req","res","redirect","Router","push","idToken","cookies","token","jsCookie","get","serviceProxy","Promise","all","findProvinces","findBrands","undefined","findCategories","getAllWeightRanges","getAllRentalPeriods","findProfile","provinces","brands","categories","weightRanges","rentalPeriods","userProfile","data","React","Component","mapState","rootState","searchModel","filters","keyword","mapDispatch","rootReducer","metadataModel","initStore"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAGA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgBMA,U;;;;;;;;;;;;;6BAkCM;AACR,aACE,iCACE,oBAAC,yBAAD;AACE,QAAA,aAAa,EAAE,KAAKC,KAAL,CAAWC,aAD5B;AAEE,QAAA,aAAa,EAAE,KAAKD,KAAL,CAAWE,aAF5B;AAGE,QAAA,YAAY,EAAE,KAAKF,KAAL,CAAWG,YAH3B;AAIE,QAAA,eAAe,EAAE,KAAKH,KAAL,CAAWI,eAJ9B;AAKE,QAAA,WAAW,EAAE,KAAKJ,KAAL,CAAWK;AAL1B,QADF,CADF;AAWD;;;;;;iDA7C6BC,O;;;;;;;AACtBC,gBAAAA,Q,GAAYD,OAAD,CAAiBE,KAAjB,CAAuBC,QAAvB,GAAkCC,YAAlC,CAA+CH,Q;;AAChE,oBAAI,CAACA,QAAD,IAAa,CAACA,QAAQ,CAACI,EAA3B,EAA+B;AAC7BL,kBAAAA,OAAO,CAACM,GAAR,GAAeN,OAAO,CAACO,GAAT,CAAqBC,QAArB,CAA8B,YAA9B,CAAd,GAA4DC,gBAAOC,IAAP,cAA5D;AACD;;AAEKC,gBAAAA,O,GAAUX,OAAO,CAACM,GAAR,GAAeN,OAAO,CAACM,GAAT,CAAqBM,OAArB,CAA6BC,KAA3C,GAAmDC,QAAQ,CAACC,GAAT,CAAa,OAAb,C;AAC7DC,gBAAAA,Y,GAAe,+BAAgBL,OAAhB,C;;uBACmEM,OAAO,CAACC,GAAR,CAAY,CAClGF,YAAY,CAACG,aAAb,EADkG,EAElGH,YAAY,CAACI,UAAb,CACEC,SADF,EAEE,EAFF,EAGE,UAHF,EAIEA,SAJF,EAKEA,SALF,CAFkG,EASlGL,YAAY,CAACM,cAAb,EATkG,EAUlGN,YAAY,CAACO,kBAAb,EAVkG,EAWlGP,YAAY,CAACQ,mBAAb,EAXkG,EAYlGR,YAAY,CAACS,WAAb,EAZkG,CAAZ,C;;;;;AAAjFC,gBAAAA,S;AAAWC,gBAAAA,M;AAAQC,gBAAAA,U;AAAYC,gBAAAA,Y;AAAcC,gBAAAA,a;AAAeC,gBAAAA,W;iDAe5D;AACLL,kBAAAA,SAAS,EAAEA,SAAS,CAACM,IADhB;AAELL,kBAAAA,MAAM,EAAEA,MAAM,CAACK,IAFV;AAGLJ,kBAAAA,UAAU,EAAEA,UAAU,CAACI,IAHlB;AAILH,kBAAAA,YAAY,EAAEA,YAAY,CAACG,IAJtB;AAKLF,kBAAAA,aAAa,EAAEA,aAAa,CAACE,IALxB;AAMLD,kBAAAA,WAAW,EAAXA;AANK,iB;;;;;;;;;;;;;;;;;;;EAxBcE,KAAK,CAACC,S;;AAiD/B,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAoB;AACnC,SAAO;AACLvC,IAAAA,YAAY,EAAEuC,SAAS,CAAChC,YADnB;AAELR,IAAAA,aAAa,EAAEwC,SAAS,CAACC,WAAV,CAAsBC,OAAtB,CAA8BC;AAFxC,GAAP;AAID,CALD;;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,WAAD,EAAsB;AACxC,SAAO;AACL3C,IAAAA,eAAe,EAAE2C,WAAW,CAACrC,YADxB;AAELT,IAAAA,aAAa,EAAE8C,WAAW,CAACJ,WAAZ,CAAwB1C,aAFlC;AAGLI,IAAAA,WAAW,EAAE0C,WAAW,CAACC,aAAZ,CAA0B3C;AAHlC,GAAP;AAKD,CAND;;eAQe,wBAAY4C,gBAAZ,EAAuBR,QAAvB,EAAiCK,WAAjC,EAA8C/C,UAA9C,C","sourcesContent":["import * as React from 'react';\nimport CreateNewsScreen from '../modules/machine-news/screens/CreateNewsScreen/CreateNewsScreen';\nimport { initStore, withRematch, ProfileState, ProfileReducers, ProfileEffects, SelectOption, PriceRange } from '../store';\nimport { Brand, Model, Province, CommonKeyword, Category, WeightRange, RentalPeriod, User } from '../services/service-proxies';\nimport { NextContext } from 'next';\nimport Router from 'next/router';\nimport { getServiceProxy } from '../services';\nimport * as jsCookie from 'js-cookie';\n\ninterface Props {\n  userProfile: User;\n  searchKeyword: string;\n  brands: Brand[];\n  categories: Category[];\n  provinces: Province[];\n  weightRanges: WeightRange[];\n  rentalPeriods: RentalPeriod[];\n  profileState: ProfileState;\n  profileReducers: ProfileReducers & ProfileEffects;\n  updateFilters: (payload: {[key: string]: string|number}) => void;\n  addNewModel: (payload: Model) => void;\n}\ninterface State {}\nclass CreateNews extends React.Component<Props, State> {\n  static async getInitialProps (context: NextContext) {\n    const authUser = (context as any).store.getState().profileModel.authUser;\n    if (!authUser || !authUser.id) {\n      context.req ? (context.res as any).redirect('/not-found') : Router.push(`/not-found`);\n    }\n\n    const idToken = context.req ? (context.req as any).cookies.token : jsCookie.get('token');\n    const serviceProxy = getServiceProxy(idToken);\n    const [provinces, brands, categories, weightRanges, rentalPeriods, userProfile] = await Promise.all([\n      serviceProxy.findProvinces(),\n      serviceProxy.findBrands(\n        undefined,\n        50,\n        'slug|asc',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.findCategories(),\n      serviceProxy.getAllWeightRanges(),\n      serviceProxy.getAllRentalPeriods(),\n      serviceProxy.findProfile(),\n    ]);\n\n    return {\n      provinces: provinces.data,\n      brands: brands.data,\n      categories: categories.data,\n      weightRanges: weightRanges.data,\n      rentalPeriods: rentalPeriods.data,\n      userProfile,\n    };\n  }\n\n  render () {\n    return (\n      <div>\n        <CreateNewsScreen\n          updateFilters={this.props.updateFilters}\n          searchKeyword={this.props.searchKeyword}\n          profileState={this.props.profileState}\n          profileReducers={this.props.profileReducers}\n          addNewModel={this.props.addNewModel}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n    searchKeyword: rootState.searchModel.filters.keyword,\n  };\n};\n\nconst mapDispatch = (rootReducer: any) => {\n  return {\n    profileReducers: rootReducer.profileModel,\n    updateFilters: rootReducer.searchModel.updateFilters,\n    addNewModel: rootReducer.metadataModel.addNewModel,\n  };\n};\n\nexport default withRematch(initStore, mapState, mapDispatch)(CreateNews);\n"],"file":"create-news.js"}