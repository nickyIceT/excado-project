{"version":3,"sources":["../../../src/client/pages/shop-info.tsx"],"names":["ShopInfo","props","newsData","shopInfo","profileState","profileReducers","followState","followReducers","resultSearchNewestPost","context","req","idToken","jsCookie","get","serviceProxy","cookies","token","Promise","all","searchElasticsearch","undefined","_id","searchNewsMostFollow","data","Component","mapState","rootState","profileModel","followModel","mapDispatch","rootReducer","initStore"],"mappings":";;;;;;;;;AAAA;;AACA;;AAGA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAYMA,Q;;;;;;;;;;;;;6BAgDK;AACP,aACE,0CACE,6BAAC,uBAAD;AACE,QAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWC,QADvB;AAEE,QAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWE,QAFvB;AAGE,QAAA,YAAY,EAAE,KAAKF,KAAL,CAAWG,YAH3B;AAIE,QAAA,eAAe,EAAE,KAAKH,KAAL,CAAWI,eAJ9B;AAKE,QAAA,WAAW,EAAE,KAAKJ,KAAL,CAAWK,WAL1B;AAME,QAAA,cAAc,EAAE,KAAKL,KAAL,CAAWM,cAN7B;AAOE,QAAA,sBAAsB,EAAE,KAAKN,KAAL,CAAWO;AAPrC,QADF,CADF;AAaD;;;;;;iDA7D4BC,O;;;;;;;AAE3B,oBAAI,CAACA,OAAO,CAACC,GAAb,EAAkB;AACVC,kBAAAA,OADU,GACAC,QAAQ,CAACC,GAAT,CAAa,OAAb,CADA;AAEhBC,kBAAAA,YAAY,GAAG,+BAAgBH,OAAhB,CAAf;AACD,iBAHD,MAIK;AACHG,kBAAAA,YAAY,GAAG,+BAAiBL,OAAO,CAACC,GAAT,CAAqBK,OAArB,CAA6BC,KAA7C,CAAf;AACD;;;uBACgDC,OAAO,CAACC,GAAR,CAAY,CAC3DJ,YAAY,CAACK,mBAAb,CACEC,SADF,EAEEA,SAFF,EAGEA,SAHF,EAIEA,SAJF,EAKEA,SALF,EAMEA,SANF,EAOEA,SAPF,EAQEA,SARF,EASEA,SATF,EAUEA,SAVF,EAWGX,OAAO,CAACC,GAAT,CAAqBP,QAArB,CAA8BkB,GAXhC,EAYED,SAZF,EAaEA,SAbF,EAcEA,SAdF,EAeEA,SAfF,EAgBE,EAhBF,EAiBE,6BAjBF,EAkBEA,SAlBF,EAmBEA,SAnBF,CAD2D,EAsB3DN,YAAY,CAACQ,oBAAb,CACGb,OAAO,CAACC,GAAT,CAAqBP,QAArB,CAA8BkB,GADhC,EAEE,CAFF,EAGE,aAHF,EAIE,KAJF,EAKED,SALF,EAMEA,SANF,CAtB2D,CAAZ,C;;;;;AAA1ClB,gBAAAA,Q;AAAUM,gBAAAA,sB;iDA+BV;AACLL,kBAAAA,QAAQ,EAAGM,OAAO,CAACC,GAAT,CAAqBP,QAD1B;AAELK,kBAAAA,sBAAsB,EAAtBA,sBAFK;AAGLN,kBAAAA,QAAQ,EAAEA,QAAQ,CAACqB;AAHd,iB;;;;;;;;;;;;;;;;;;;EAzCYC,gB;;AAiEvB,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAoB;AACnC,SAAO;AACLtB,IAAAA,YAAY,EAAEsB,SAAS,CAACC,YADnB;AAELrB,IAAAA,WAAW,EAAEoB,SAAS,CAACE;AAFlB,GAAP;AAID,CALD;;AAOA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,WAAD,EAAsB;AACxC,SAAO;AACLzB,IAAAA,eAAe,EAAEyB,WAAW,CAACH,YADxB;AAELpB,IAAAA,cAAc,EAAEuB,WAAW,CAACF;AAFvB,GAAP;AAID,CALD;;eAOe,wBAAYG,gBAAZ,EAAuBN,QAAvB,EAAiCI,WAAjC,EAA8C7B,QAA9C,C","sourcesContent":["import React, { Component } from 'react';\nimport ShopInfoScreen from '../modules/machine-news/screens/ShopInfoScreen/ShopInfoScreen';\nimport { NextContext } from 'next';\nimport { Shop, News } from '../services/service-proxies';\nimport { initStore, withRematch, ProfileState, ProfileEffects, ProfileReducers, FollowState, FollowReducers, FollowEffects } from '../store';\nimport { getServiceProxy } from '../services';\nimport * as jsCookie from 'js-cookie';\n\ninterface Props {\n  shopInfo: Shop;\n  newsData: News[];\n  profileState: ProfileState;\n  profileReducers: ProfileReducers & ProfileEffects;\n  followState: FollowState;\n  followReducers: FollowReducers & FollowEffects;\n  resultSearchNewestPost: any;\n}\ninterface State { }\nclass ShopInfo extends Component<Props, State> {\n  static async getInitialProps(context: NextContext) {\n    let serviceProxy: any;\n    if (!context.req) {\n      const idToken = jsCookie.get('token');\n      serviceProxy = getServiceProxy(idToken);\n    }\n    else {\n      serviceProxy = getServiceProxy((context.req as any).cookies.token);\n    }\n    const [newsData, resultSearchNewestPost] = await Promise.all([\n      serviceProxy.searchElasticsearch(\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        (context.req as any).shopInfo._id,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        12,\n        'elasticsearchCreatedAt|desc',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.searchNewsMostFollow(\n        (context.req as any).shopInfo._id,\n        4,\n        'counterView',\n        '_id',\n        undefined,\n        undefined,\n      ),\n    ]);\n    return {\n      shopInfo: (context.req as any).shopInfo,\n      resultSearchNewestPost,\n      newsData: newsData.data,\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <ShopInfoScreen\n          newsData={this.props.newsData}\n          shopInfo={this.props.shopInfo}\n          profileState={this.props.profileState}\n          profileReducers={this.props.profileReducers}\n          followState={this.props.followState}\n          followReducers={this.props.followReducers}\n          resultSearchNewestPost={this.props.resultSearchNewestPost}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n    followState: rootState.followModel,\n  };\n};\n\nconst mapDispatch = (rootReducer: any) => {\n  return {\n    profileReducers: rootReducer.profileModel,\n    followReducers: rootReducer.followModel,\n  };\n};\n\nexport default withRematch(initStore, mapState, mapDispatch)(ShopInfo);\n"],"file":"shop-info.js"}