{"version":3,"sources":["../../../src/client/pages/refresh-token-iframe.tsx"],"names":["RefreshTokenIframe","firebase","auth","onAuthStateChanged","user","refreshTokenInterval","setInterval","currentUser","getIdToken","then","idToken","clearInterval","display","React","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;IAIMA,kB;;;;;;;;;;;;;;;;;;;;;;;;;wCAGiB;AAAA;;AACnB;;AACAC,mBAASC,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAC3C,YAAIA,IAAJ,EAAU;AACR,UAAA,MAAI,CAACC,oBAAL,GAA4BC,WAAW,CAAC,YAAM;AAC5CL,yBAASC,IAAT,GAAgBK,WAAhB,CAA6BC,UAA7B,CAAwC,IAAxC,EAA8CC,IAA9C,CAAmD,UAACC,OAAD,EAAa;AAC9D,yCAAgBA,OAAhB;AACD,aAFD;AAGD,WAJsC,EAIpC,KAAK,EAAL,GAAU,IAJ0B,CAAvC;AAKD;AACF,OARD;AASD;;;2CAEuB;AACtBC,MAAAA,aAAa,CAAC,KAAKN,oBAAN,CAAb;AACD;;;6BAES;AACR,aACE,0CACE;AAAM,QAAA,EAAE,EAAC,MAAT;AAAgB,QAAA,MAAM,EAAC,MAAvB;AAA8B,QAAA,MAAM,EAAC,aAArC;AAAmD,QAAA,KAAK,EAAE;AAACO,UAAAA,OAAO,EAAE;AAAV;AAA1D,QADF,CADF;AAKD;;;;EA1B8BC,eAAMC,S;;eA6BxBd,kB","sourcesContent":["import React from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { initializeFirebaseApp, submitLoginForm } from '../core';\n\ninterface Props {}\ninterface State {}\nclass RefreshTokenIframe extends React.Component<Props, State> {\n  refreshTokenInterval: any;\n\n  componentDidMount () {\n    initializeFirebaseApp();\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.refreshTokenInterval = setInterval(() => {\n          firebase.auth().currentUser!.getIdToken(true).then((idToken) => {\n            submitLoginForm(idToken);\n          });\n        }, 30 * 60 * 1000);\n      }\n    });\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.refreshTokenInterval);\n  }\n\n  render () {\n    return (\n      <div>\n        <form id='form' method='post' action='/auth/login' style={{display: 'none'}} />\n      </div>\n    );\n  }\n}\n\nexport default RefreshTokenIframe;\n"],"file":"refresh-token-iframe.js"}