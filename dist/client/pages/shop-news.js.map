{"version":3,"sources":["../../../src/client/pages/shop-news.tsx"],"names":["AllProducts","props","resultSearchNewestPost","newsResult","shopInfo","weightRanges","categories","brands","profileReducers","profileState","followReducers","context","req","idToken","jsCookie","get","serviceProxy","cookies","token","Promise","all","searchElasticsearch","undefined","_id","searchNewsMostFollow","findCategories","findBrands","getAllWeightRanges","data","Component","mapState","rootState","profileModel","mapDispatch","rootReducer","profileMode","followModel","initStore"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ShopNewsScreen from '../modules/machine-news/screens/ShopNewsScreen/ShopNewsScreen';\nimport { Brand, Category, Shop, ElasticSearchResult, WeightRange } from '../services/service-proxies';\nimport { withRematch, initStore, ProfileState, FollowEffects, FollowReducers, ProfileEffects, ProfileReducers } from '../store';\nimport { NextContext } from 'next';\nimport * as jsCookie from 'js-cookie';\nimport { getServiceProxy } from '../services';\ninterface Props {\n  newsResult: ElasticSearchResult;\n  shopInfo: Shop;\n  categories: Category[];\n  brands: Brand[];\n  weightRanges: WeightRange[];\n  resultSearchNewestPost: { data: any[], before?: string, after?: string };\n  profileState: ProfileState;\n  followReducers: FollowEffects & FollowReducers;\n  profileReducers: ProfileEffects & ProfileReducers;\n}\ninterface State { }\nclass AllProducts extends Component<Props, State> {\n  static async getInitialProps(context: NextContext) {\n    let serviceProxy: any;\n    if (!context.req) {\n      const idToken = jsCookie.get('token');\n      serviceProxy = getServiceProxy(idToken);\n    }\n    else {\n      serviceProxy = getServiceProxy((context.req as any).cookies.token);\n    }\n    const [newsResult, resultSearchNewestPost, categories, brands, weightRanges] = await Promise.all([\n      serviceProxy.searchElasticsearch(\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        (context.req as any).shopInfo._id,\n        undefined,\n        undefined,\n        undefined,\n        undefined,\n        12,\n        'elasticsearchCreatedAt|desc',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.searchNewsMostFollow(\n        (context.req as any).shopInfo._id,\n        4,\n        'counterView',\n        '_id',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.findCategories(),\n      serviceProxy.findBrands(\n        undefined,\n        30,\n        'slug|asc',\n        undefined,\n        undefined,\n      ),\n      serviceProxy.getAllWeightRanges(),\n    ]);\n\n    return {\n      newsResult,\n      shopInfo: (context.req as any).shopInfo,\n      resultSearchNewestPost,\n      categories: categories.data,\n      brands: brands.data,\n      weightRanges: weightRanges.data,\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <ShopNewsScreen\n          resultSearchNewestPost={this.props.resultSearchNewestPost}\n          newsResult={this.props.newsResult}\n          shopInfo={this.props.shopInfo}\n          weightRanges={this.props.weightRanges}\n          categories={this.props.categories}\n          brands={this.props.brands}\n          profileReducers={this.props.profileReducers}\n          profileState={this.props.profileState}\n          followReducers={this.props.followReducers}\n        />\n      </div>\n    );\n  }\n}\n\nconst mapState = (rootState: any) => {\n  return {\n    profileState: rootState.profileModel,\n  };\n};\n\nconst mapDispatch = (rootReducer: any) => {\n  return {\n    profileReducers: rootReducer.profileMode,\n    followReducers: rootReducer.followModel,\n  };\n};\n\nexport default withRematch(initStore, mapState, mapDispatch)(AllProducts);\n"],"file":"shop-news.js"}