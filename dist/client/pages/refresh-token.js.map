{"version":3,"sources":["../../../src/client/pages/refresh-token.tsx"],"names":["RefreshToken","firebase","auth","onAuthStateChanged","user","currentUser","getIdToken","then","idToken","window","location","href","textAlign","marginTop","display","React","Component"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;IAKMA,Y;;;;;;;;;;;;;wCACiB;AACnB;;AACAC,mBAASC,IAAT,GAAgBC,kBAAhB,CAAmC,UAACC,IAAD,EAAU;AAC3C,YAAIA,IAAJ,EAAU;AACRH,uBAASC,IAAT,GAAgBG,WAAhB,CAA6BC,UAA7B,CAAwC,IAAxC,EAA8CC,IAA9C,CAAmD,UAACC,OAAD,EAAa;AAC9D,uCAAgBA,OAAhB;AACD,WAFD;AAGD,SAJD,MAIO;AACLC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;AACF,OARD;AASD;;;6BAES;AACR,aACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAA+B,QAAA,KAAK,EAAE;AAACC,UAAAA,SAAS,EAAE,QAAZ;AAAsBC,UAAAA,SAAS,EAAE;AAAjC;AAAtC,SACE;AAAM,QAAA,QAAQ,EAAE;AAAhB,QADF,EAEE;AAAM,QAAA,EAAE,EAAC,MAAT;AAAgB,QAAA,MAAM,EAAC,MAAvB;AAA8B,QAAA,MAAM,EAAC,aAArC;AAAmD,QAAA,KAAK,EAAE;AAACC,UAAAA,OAAO,EAAE;AAAV;AAA1D,QAFF,CADF;AAMD;;;;EArBwBC,eAAMC,S;;eAwBlBhB,Y","sourcesContent":["import React from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { initializeFirebaseApp, submitLoginForm } from '../core';\nimport { Spin } from 'antd';\n\ninterface Props {}\ninterface State {}\nclass RefreshToken extends React.Component<Props, State> {\n  componentDidMount () {\n    initializeFirebaseApp();\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        firebase.auth().currentUser!.getIdToken(true).then((idToken) => {\n          submitLoginForm(idToken);\n        });\n      } else {\n        window.location.href = '/';\n      }\n    });\n  }\n\n  render () {\n    return (\n      <div className='refresh-token' style={{textAlign: 'center', marginTop: '100px'}}>\n        <Spin spinning={true} />\n        <form id='form' method='post' action='/auth/login' style={{display: 'none'}} />\n      </div>\n    );\n  }\n}\n\nexport default RefreshToken;\n"],"file":"refresh-token.js"}