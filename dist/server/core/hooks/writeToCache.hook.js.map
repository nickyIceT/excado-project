{"version":3,"sources":["../../../../src/server/core/hooks/writeToCache.hook.ts"],"names":["writeToCache","context","readFromCache","key","path","method","Object","keys","params","query","map","item","join","apiCache","set","result"],"mappings":";;;;;;;;;AACA;;;;;;;;AAEO,IAAMA,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAC1B,gBAAI,CAAEA,OAAD,CAAiBC,aAAtB,EAAqC;AAC7BC,cAAAA,GAD6B,cACnBF,OAAO,CAACG,IADW,cACHH,OAAO,CAACI,MADL,SACcC,MAAM,CAACC,IAAP,CAAYN,OAAO,CAACO,MAAR,CAAeC,KAAf,GAAuBR,OAAO,CAACO,MAAR,CAAeC,KAAtC,GAA8C,EAA1D,EAA8DC,GAA9D,CAAkE,UAACC,IAAD;AAAA,uBAAUV,OAAO,CAACO,MAAR,CAAeC,KAAf,CAAsBE,IAAtB,CAAV;AAAA,eAAlE,EAAyGC,IAAzG,CAA8G,GAA9G,CADd;;AAEnCC,yBAASC,GAAT,CAAaX,GAAb,EAAkBF,OAAO,CAACc,MAA1B;AACD;;AAJyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZf,YAAY;AAAA;AAAA;AAAA,GAAlB","sourcesContent":["import { HookContext } from '@feathersjs/feathers';\nimport { apiCache } from '..';\n\nexport const writeToCache = async (context: HookContext) => {\n  if (!(context as any).readFromCache) {\n    const key = `/${context.path}/${context.method}${Object.keys(context.params.query ? context.params.query : {}).map((item) => context.params.query![item]).join('&')}`;\n    apiCache.set(key, context.result);\n  }\n};\n"],"file":"writeToCache.hook.js"}