{"version":3,"sources":["../../../../../../../src/server/modules/machine-news/aggregates/categories/hooks/invalidCategoryDetailCache.hook.ts"],"names":["invalidCategoryDetailCache","context","CategoryModel","findById","id","exec","categoryInfo","key","slug","apiCache","del","error","logger"],"mappings":";;;;;;;;;AACA;;AACA;;;;;;;;AAEO,IAAMA,0BAA0B;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACbC,0BAAcC,QAAd,CAAuBF,OAAO,CAACG,EAA/B,EAAmCC,IAAnC,EADa;;AAAA;AAClCC,YAAAA,YADkC;;AAExC,gBAAIA,YAAJ,EAAkB;AACVC,cAAAA,GADU,0DAC4CD,YAAY,CAACE,IADzD;;AAEhBC,6BAASC,GAAT,CAAaH,GAAb,EAAkB,UAACI,KAAD,EAAW;AAC3BC,6BAAOD,KAAP,CAAaA,KAAb;AACD,eAFD;AAGD;;AAPuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAA1BX,0BAA0B;AAAA;AAAA;AAAA,GAAhC","sourcesContent":["import { HookContext } from '@feathersjs/feathers';\nimport { apiCache, logger } from '@app/core';\nimport { CategoryModel } from '../categories.repository';\n\nexport const invalidCategoryDetailCache = async (context: HookContext) => {\n  const categoryInfo = await CategoryModel.findById(context.id).exec() as any;\n  if (categoryInfo) {\n    const key = `/api/categories/customs/find-category-detail/${categoryInfo.slug}`;\n    apiCache.del(key, (error) => {\n      logger.error(error);\n    });\n  }\n};\n"],"file":"invalidCategoryDetailCache.hook.js"}