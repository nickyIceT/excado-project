{"version":3,"sources":["../../../../../../../src/server/modules/machine-news/aggregates/news/hooks/increaseNewsCount.hook.ts"],"names":["increaseNewsCount","context","newsId","result","id","newsRepository","findById","newsInfo","brand","_id","brandRepository","location","provinceRepository","categoryId","categoryRepository","model","modelRepository"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEO,IAAMA,iBAAiB;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACzBC,YAAAA,MADyB,GAChBD,OAAO,CAACE,MAAR,CAAeC,EADC;AAAA;AAAA,mBAERC,qBAAeC,QAAf,CAAwBJ,MAAxB,CAFQ;;AAAA;AAEzBK,YAAAA,QAFyB;;AAI/B,gBAAIA,QAAJ,EAAc;AACZ,kBAAIA,QAAQ,CAACC,KAAT,IAAmBD,QAAQ,CAACC,KAAV,CAAwBC,GAA9C,EAAmD;AACjDC,wCAAgBV,iBAAhB,CAAmCO,QAAQ,CAACC,KAAV,CAAwBC,GAA1D;AACD;;AAED,kBAAIF,QAAQ,CAACI,QAAT,IAAsBJ,QAAQ,CAACI,QAAV,CAA2BF,GAApD,EAAyD;AACvDG,8CAAmBZ,iBAAnB,CAAsCO,QAAQ,CAACI,QAAV,CAA2BF,GAAhE;AACD;;AAED,kBAAIF,QAAQ,CAACM,UAAT,IAAwBN,QAAQ,CAACM,UAAV,CAA6BJ,GAAxD,EAA6D;AAC3DK,+CAAmBd,iBAAnB,CAAsCO,QAAQ,CAACM,UAAV,CAA6BJ,GAAlE;AACD;;AAED,kBAAIF,QAAQ,CAACQ,KAAT,IAAmBR,QAAQ,CAACQ,KAAV,CAAwBN,GAA9C,EAAmD;AACjDO,wCAAgBhB,iBAAhB,CAAmCO,QAAQ,CAACQ,KAAV,CAAwBN,GAA1D;AACD;AACF;;AApB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAjBT,iBAAiB;AAAA;AAAA;AAAA,GAAvB","sourcesContent":["import { HookContext } from '@feathersjs/feathers';\nimport { newsRepository } from '../news.repository';\nimport { brandRepository } from '../../brands/brands.repository';\nimport { provinceRepository } from '../../provinces/provinces.repository';\nimport { categoryRepository } from '../../categories/categories.repository';\nimport { modelRepository } from '../../models/models.repository';\n\nexport const increaseNewsCount = async (context: HookContext) => {\n  const newsId = context.result.id;\n  const newsInfo = await newsRepository.findById(newsId);\n\n  if (newsInfo) {\n    if (newsInfo.brand && (newsInfo.brand as any)._id) {\n      brandRepository.increaseNewsCount((newsInfo.brand as any)._id);\n    }\n\n    if (newsInfo.location && (newsInfo.location as any)._id) {\n      provinceRepository.increaseNewsCount((newsInfo.location as any)._id);\n    }\n\n    if (newsInfo.categoryId && (newsInfo.categoryId as any)._id) {\n      categoryRepository.increaseNewsCount((newsInfo.categoryId as any)._id);\n    }\n\n    if (newsInfo.model && (newsInfo.model as any)._id) {\n      modelRepository.increaseNewsCount((newsInfo.model as any)._id);\n    }\n  }\n};\n"],"file":"increaseNewsCount.hook.js"}