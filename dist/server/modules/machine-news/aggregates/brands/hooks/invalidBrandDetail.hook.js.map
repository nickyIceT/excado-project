{"version":3,"sources":["../../../../../../../src/server/modules/machine-news/aggregates/brands/hooks/invalidBrandDetail.hook.ts"],"names":["invalidBrandDetailCache","context","BrandModel","findById","id","exec","brandInfo","key","slug","apiCache","del","error","logger"],"mappings":";;;;;;;;;AACA;;AACA;;;;;;;;AAEO,IAAMA,uBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACbC,mBAAWC,QAAX,CAAoBF,OAAO,CAACG,EAA5B,EAAgCC,IAAhC,EADa;;AAAA;AAC/BC,YAAAA,SAD+B;;AAErC,gBAAIA,SAAJ,EAAe;AACPC,cAAAA,GADO,mDACwCD,SAAS,CAACE,IADlD;;AAEbC,6BAASC,GAAT,CAAaH,GAAb,EAAkB,UAACI,KAAD,EAAW;AAC3BC,6BAAOD,KAAP,CAAaA,KAAb;AACD,eAFD;AAGD;;AAPoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAvBX,uBAAuB;AAAA;AAAA;AAAA,GAA7B","sourcesContent":["import { HookContext } from '@feathersjs/feathers';\nimport { apiCache, logger } from '@app/core';\nimport { BrandModel } from '../brands.repository';\n\nexport const invalidBrandDetailCache = async (context: HookContext) => {\n  const brandInfo = await BrandModel.findById(context.id).exec() as any;\n  if (brandInfo) {\n    const key = `/api/brands/customs/find-brand-detail/${brandInfo.slug}`;\n    apiCache.del(key, (error) => {\n      logger.error(error);\n    });\n  }\n};\n"],"file":"invalidBrandDetail.hook.js"}