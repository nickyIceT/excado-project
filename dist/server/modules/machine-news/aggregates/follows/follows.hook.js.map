{"version":3,"sources":["../../../../../../src/server/modules/machine-news/aggregates/follows/follows.hook.ts"],"names":["followsHook","before","all","authenticate","context","params","userRepository","newsRepository","find","create","addCreationInfo","update","addModificationInfo","patch","remove","after","checkFollowSearchResult","updateFollowCount"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,WAAiB,GAAG;AACxBC,EAAAA,MAAM,EAAE;AACNC,IAAAA,GAAG,EAAE,CACHC,kBADG;AAAA;AAAA;AAAA;AAAA;AAAA,gCAEH,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AACEA,gBAAAA,OAAO,CAACC,MAAR,CAAeC,cAAf,GAAgCA,oBAAhC;AACAF,gBAAAA,OAAO,CAACC,MAAR,CAAeE,cAAf,GAAgCA,gBAAhC;;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAFG;;AAAA;AAAA;AAAA;AAAA,QADC;AAQNC,IAAAA,IAAI,EAAE,EARA;AAUNC,IAAAA,MAAM,EAAE,CACNC,qBADM,CAVF;AAaNC,IAAAA,MAAM,EAAE,CACNC,yBADM,CAbF;AAgBNC,IAAAA,KAAK,EAAE,CACLD,yBADK,CAhBD;AAmBNE,IAAAA,MAAM,EAAE;AAnBF,GADgB;AAuBxBC,EAAAA,KAAK,EAAE;AACLP,IAAAA,IAAI,EAAE,CACJQ,yBADI,CADD;AAILH,IAAAA,KAAK,EAAE,CACLI,oCADK;AAJF;AAvBiB,CAA1B;eAiCejB,W","sourcesContent":["import { Hook, addCreationInfo, addModificationInfo, authenticate } from '@app/core';\nimport { userRepository } from '@app/auth';\nimport { newsRepository, checkFollowSearchResult } from '@app/machine-news';\nimport { updateFollowCount } from './hooks/updateFollowCount.hook';\n\nconst followsHook: Hook = {\n  before: {\n    all: [\n      authenticate,\n      async (context: any) => {\n        context.params.userRepository = userRepository;\n        context.params.newsRepository = newsRepository;\n      },\n    ],\n    find: [\n    ],\n    create: [\n      addCreationInfo,\n    ],\n    update: [\n      addModificationInfo,\n    ],\n    patch: [\n      addModificationInfo,\n    ],\n    remove: [\n    ],\n  },\n  after: {\n    find: [\n      checkFollowSearchResult,\n    ],\n    patch: [\n      updateFollowCount,\n    ],\n  },\n};\n\nexport default followsHook;\n"],"file":"follows.hook.js"}