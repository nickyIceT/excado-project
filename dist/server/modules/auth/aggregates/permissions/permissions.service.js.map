{"version":3,"sources":["../../../../../../src/server/modules/auth/aggregates/permissions/permissions.service.ts"],"names":["permissionsService","find","_params","result","rootDir","rootLocation","moduleNames","excludedModules","sort","moduleName","indexOf","logger","info","permissions","require","PERMISSIONS","error"],"mappings":";;;;;;;;;AACA;;AACA;;;;;;;;AAEA,IAAMA,kBAAsC,GAAG;AAC7CC,EAAAA,IAAI;AAAA;AAAA;AAAA,8BAAE,iBAAOC,OAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACEC,cAAAA,MADF,GACgB,EADhB;AAEEC,cAAAA,OAFF,aAEeC,kBAFf;AAAA;AAAA,qBAGsB,sBAAQD,OAAR,CAHtB;;AAAA;AAGEE,cAAAA,WAHF;AAIEC,cAAAA,eAJF,GAI8B,CAAC,WAAD,CAJ9B;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMqBD,WAAW,CAACE,IAAZ,EANrB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMOC,cAAAA,UANP;;AAAA,oBAOEF,eAAe,CAACG,OAAhB,CAAwBD,UAAxB,MAAwC,CAAC,CAP3C;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAUFE,2BAAOC,IAAP,oBAAwBH,UAAxB;;AACA,kBAAI;AACII,gBAAAA,WADJ,GACkBC,OAAO,oBAAaL,UAAb,kBAAP,CAA8CM,WADhE;AAEFZ,gBAAAA,MAAM,CAACM,UAAD,CAAN,GAAqBI,WAArB;AACD,eAHD,CAGE,OAAOG,KAAP,EAAc,CACd;AACD;;AAhBC;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,+CAmBGb,MAnBH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA;AADyC,CAA/C;eAwBeH,kB","sourcesContent":["import { PermissionsService } from './interfaces/PermissionsService';\nimport { readdir } from 'fs-extra';\nimport { rootLocation, logger } from '@app/core';\n\nconst permissionsService: PermissionsService = {\n  find: async (_params) => {\n    const result: any = {};\n    const rootDir = `${rootLocation}/server/modules`;\n    const moduleNames = await readdir(rootDir);\n    const excludedModules: string[] = ['.DS_Store'];\n\n    for (const moduleName of moduleNames.sort()) {\n      if (excludedModules.indexOf(moduleName) !== -1) {\n        continue;\n      }\n      logger.info(`Loading '${moduleName}' permissons ...`);\n      try {\n        const permissions = require(`../../../${moduleName}/permissions`).PERMISSIONS;\n        result[moduleName] = permissions;\n      } catch (error) {\n        // ignore if not found module\n      }\n    }\n\n    return result;\n  },\n};\n\nexport default permissionsService;\n"],"file":"permissions.service.js"}