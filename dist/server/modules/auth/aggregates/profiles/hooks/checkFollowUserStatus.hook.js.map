{"version":3,"sources":["../../../../../../../src/server/modules/auth/aggregates/profiles/hooks/checkFollowUserStatus.hook.ts"],"names":["checkFollowUserStatus","context","params","authUser","id","JSONResult","JSON","parse","stringify","result","followUsersRepository","findOne","user","followee","_id","followUser","isFollowing","Boolean"],"mappings":";;;;;;;;;AACA;;;;;;;;;;;;AAEO,IAAMA,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAG,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAC/BA,OAAO,CAACC,MAAR,CAAeC,QAAf,IAA2BF,OAAO,CAACC,MAAR,CAAeC,QAAf,CAAwBC,EADpB;AAAA;AAAA;AAAA;;AAE3BC,YAAAA,UAF2B,GAEdC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeP,OAAO,CAACQ,MAAvB,CAAX,CAFc;AAAA;AAAA,mBAGRC,mCAAsBC,OAAtB,CAA8B;AACrDC,cAAAA,IAAI,EAAEX,OAAO,CAACC,MAAR,CAAeC,QAAf,CAAwBC,EADuB;AAErDS,cAAAA,QAAQ,EAAER,UAAU,CAACS;AAFgC,aAA9B,CAHQ;;AAAA;AAG3BC,YAAAA,UAH2B;AAQjCd,YAAAA,OAAO,CAACQ,MAAR,qBACKJ,UADL;AAEEW,cAAAA,WAAW,EAAEC,OAAO,CAACF,UAAD;AAFtB;;AARiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAArBf,qBAAqB;AAAA;AAAA;AAAA,GAA3B","sourcesContent":["import { HookContext } from '@feathersjs/feathers';\nimport { followUsersRepository } from '../../../../machine-news/aggregates/follows/follow-users.repository';\n\nexport const checkFollowUserStatus = async (context: HookContext) => {\n  if (context.params.authUser && context.params.authUser.id) {\n    const JSONResult = JSON.parse(JSON.stringify(context.result));\n    const followUser = await followUsersRepository.findOne({\n      user: context.params.authUser.id,\n      followee: JSONResult._id,\n    });\n\n    context.result = {\n      ...JSONResult,\n      isFollowing: Boolean(followUser),\n    };\n  }\n};\n"],"file":"checkFollowUserStatus.hook.js"}